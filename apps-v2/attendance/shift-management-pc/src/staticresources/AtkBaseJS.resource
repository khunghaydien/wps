"object"==typeof Visualforce&&(Visualforce.remoting.timeout=12e4);var teasp={logic:{},action:{},data:{},dialog:{},helper:{},view:{},manager:null,message:null,viewPoint:null,sequence:{marker:0,toolTip:0,jobWork:1,dialog:1},dialogStack:[],prefixPt:"",prefixBar:"",controlClass:"RtkPotalCtl",permitPushTime:!0,ts1OptimizeOnBrowser:!1,ts1OptimizeWidth:null,timestamp:function(e,t){t=t||new Date,e=t.getFullYear()+"/"+(
t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds()+" "+(e||"");return globalTimeLog.push(e.substring(0,100)),console.log(e),t},decode:function(e,t){try{if(e){if(1==t)return dojo.fromJson(e);if(2==t)return parseInt(e,10)}return e}catch(e){console.log(e.message),console.log(e.stack)}},jsondecode:function(e){return teasp.decode(e,1)},eval:function(e){if(e)try{
dojo.eval(e)}catch(e){console.log(e.message),console.log(e.stack)}},getHref:function(e){return"/apex/"+(teasp.prefixBar||"")+(e||"")},ts1OptimizeOptionValue:{OptimizedTs1:"1",PcVerWithoutGraph:"2"},resolved:{4652:1,4666:1,4795:1,4932:1,5259:1,5385:1,5446:1,5476:1,5844:1,5909:1,5974:1,6089:1,6381:1,6664:1,6670:1,6905:1,6983:1,6980:1,6717:1,7010:1,7540:1,7866:1,7990:1,8150:1,8159:1,8161:1,8178:1,8540:1,8538:1,8771:1,
8957:1,9046:1,9050:1,9185:1,9203:1,9353:1,9358:1,9429:1,9471:1,9523:1,9887:1,SECOM:1,"V5-1028":1,"V5-3293":1,"V5-4865":1}},globalLoadRes=null,globalTimeLog=[],globalPageUrl={},DATE_FORM_S={formatLength:"medium",selector:"date"},is_array=(teasp.provide=function(e){for(var t=e.split("."),a=1;a<t.length;a++){var o=t[a];teasp[o]||(teasp[o]={})}},teasp.setPageUrl=function(e,t){globalPageUrl[e]=t},
teasp.getPageUrl=function(e){return globalPageUrl[e]||null},teasp.isSforce=function(){return"object"==typeof sforce&&sforce.one},teasp.isSforce1=function(){return"object"==typeof sforce&&sforce.one&&0<=navigator.userAgent.indexOf("Salesforce")},teasp.locationHref=function(e,t,a){"object"==typeof sforce&&sforce.one&&!a?sforce.one.navigateToURL(e):t?t.href=e:location.href=e},teasp.downloadHref=function(e){
location.href=e},teasp.postScript=function(){"object"==typeof sforce&&sforce.one&&0<=navigator.userAgent.indexOf("Salesforce")&&(window.onkeydown=function(){window.focus()})},teasp.COOKIE_KEY="TeamSpiritConfig",teasp.getCookie=function(e){var t=dojo.cookie(teasp.COOKIE_KEY);return(t&&dojo.fromJson(t)||{})[e]||null},teasp.setCookie=function(e,t){var a=dojo.cookie(teasp.COOKIE_KEY),a=a&&dojo.fromJson(a)||{};a[e]=t,
dojo.cookie(teasp.COOKIE_KEY,dojo.toJson(a),{expires:365,secure:!0})},teasp.STORAGE_KEY="TeamSpiritConfig",teasp.getLocalStorage=function(e){var t=localStorage.getItem(teasp.STORAGE_KEY);return(t&&dojo.fromJson(t)||{})[e]||null},teasp.setLocalStorage=function(e,t){var a=localStorage.getItem(teasp.STORAGE_KEY),a=a&&dojo.fromJson(a)||{};a[e]=t,localStorage.setItem(teasp.STORAGE_KEY,dojo.toJson(a))},
teasp.dojoRequire=function(){require(["dojo/parser","dojo/window","dojo/cookie","dojo/string","dojo/Deferred","dojo/date/locale","dojo/store/Memory","dojo/data/ItemFileReadStore","dojo/data/ItemFileWriteStore","dijit/Calendar","dijit/Dialog","dijit/ProgressBar","dijit/form/ComboBox","dijit/form/DropDownButton","dijit/form/HorizontalRule","dijit/form/HorizontalSlider","dijit/form/NumberSpinner","dijit/form/Select",
"dijit/form/Slider","dijit/layout/ContentPane","dijit/layout/TabContainer","dijit/Menu","dijit/MenuItem","dijit/MenuSeparator","dijit/PopupMenuItem","dijit/ProgressBar","dijit/Tooltip","dijit/TooltipDialog","dojox/layout/ResizeHandle"])},teasp.isNarrow=function(e){return(teasp.isSforce1()||teasp.ts1OptimizeOnBrowser)&&teasp.isTs1Optimize()&&window.innerWidth<(e||teasp.ts1OptimizeWidth||768)},
teasp.isDisplayingPcVersionOnTs1=function(){return teasp.isSforce1()&&teasp.ts1OptimizeOption==teasp.ts1OptimizeOptionValue.PcVerWithoutGraph},teasp.isOnlyNarrow=function(e){return window.innerWidth<(e||teasp.ts1OptimizeWidth||768)},teasp.setTs1OptimizeOnBrowser=function(e){teasp.ts1OptimizeOnBrowser=e},teasp.setTs1OptimizeWidth=function(e){teasp.ts1OptimizeWidth=e},teasp.setTs1OptimizeOption=function(e){
teasp.ts1OptimizeOption=e},teasp.isTs1Optimize=function(){return teasp.ts1OptimizeOption==teasp.ts1OptimizeOptionValue.OptimizedTs1},teasp.isShowGraph=function(){return!teasp.isSforce1()},teasp.isEnglish=function(){return teasp.message&&"en_US"==teasp.message.getLanguageLocaleKey()},teasp.isAndroid=function(){return/Android/i.test(navigator.userAgent)},teasp.isMobile=function(){return/(Android|iPhone|iPad)/i.test(
navigator.userAgent)},teasp.setDeviceWidth=function(){var e;teasp.ts1OptimizeOnBrowser&&teasp.isMobile()&&((e=document.createElement("meta")).setAttribute("name","viewport"),e.setAttribute("content","width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"),document.getElementsByTagName("head")[0].appendChild(e))},teasp.adjustMarginTop=function(e,t){var a,e=dojo.byId(e);e&&0<(a=e.offsetTop
)&&dojo.style(e,"margin-top",-1*a+(t||0)+"px")},teasp.backyard=function(o){var e=dojo.byId(o.areaId),s=dojo.create("input",{type:"text",id:o.id,maxLength:30,style:"display:none;"},e);dojo.connect(s,"onkeypress",function(e){var t,a;13==e.keyCode?1<(a=(t=s.value.trim()).split(/=/)).length&&a[0].length&&a[1].length?teasp.locationHref((/^(support|check)$/.test(a[0])?o.page2:"view"==a[0]&&"3"==a[1]?o.page3:o.page1)+"?"+t
):dojo.style(s,"display","none"):27==e.keyCode&&dojo.style(s,"display","none")}),dojo.connect(e,"ondblclick",function(e){"none"==dojo.style(s,"display")&&e.shiftKey&&e.altKey?(s.value="",dojo.style(s,"display",""),s.focus()):dojo.style(s,"display","none")}),dojo.connect(e,"onclick",function(){dojo.style(s,"display","none")})},Array.prototype.contains||(Array.prototype.contains=function(e){for(var t in this)if(
this.hasOwnProperty(t)&&this[t]===e)return!0;return!1}),String.prototype.entitize=function(){var e=""+this;return e=(e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/\"/g,"&quot;")).replace(/{/g,"&#123;")).replace(/}/g,"&#125;")).replace(/\'/g,"&#039;")},String.prototype.getExtent=function(e){for(var t=e,e=(t.innerHTML=this,t.offsetWidth),a=t.offsetHeight;t.firstChild;
)t.removeChild(t.firstChild);return{width:e,height:a}},String.prototype.truncateTailInWidth=function(e,t){if(0===this.length)return"";if(this.getExtent(t).width<=e)return this;for(var a=this.length-1;1<=a;--a){var o=this.slice(0,a)+"...";if(o.getExtent(t).width<=e)return o}return""},function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")}),
console=console||{debug:function(){},log:function(){}},JSON=(console.debug||(console.debug=function(){}),console.log||(console.log=function(e){}),teasp.constant={LEVEL_TRACE:6,LEVEL_DEBUG:5,LEVEL_INFO:4,LEVEL_WARN:3,LEVEL_ERROR:2,LEVEL_FATAL:1,LEVEL_OFF:0,REST_FIX:21,REST_FREE:22,REST_PAY:23,REST_UNPAY:24,AWAY:30,TIMEOUT_CAUSE:/Error parsing json response/i,STATUS_NOTADMIT:"未確定",STATUS_NOTREQUEST:"未申請",
STATUS_CANCEL1:"確定取消",STATUS_CANCEL2:"申請取消",STATUS_REJECT:"却下",STATUS_REJECTDONE:"却下済み",STATUS_WAIT:"承認待ち",STATUS_ADMIT:"確定済み",STATUS_APPROVE:"承認済み",STATUS_APPROVING:"承認中",STATUS_PAYD:"精算済み",STATUS_REASSIGNED:"再割当済み",STATUS_REQUESTED:"申請済み",STATUS_CANCEL_WAIT:"取消伝票承認待ち",STATUS_CANCEL_APPROVE:"取消伝票承認済み",STATUS_JOURNAL:"仕訳済み",EXP_PRE_FORM1:"出張・交通費",EXP_PRE_FORM2:"会議・交際費",EXP_PRE_FORM3:"一般経費",EXP_PRE_FORM4:"仮払申請",
EXP_FORM0:"expApply",CU_INT_SIZE_MAX:12,CU_DEC_POINT_MAX:6,CU_DEC_POINT_MIN:2,CU_INT_DISP_SIZE_MAX:17,CU_DEC_DISP_SIZE_MAX:21,CU_DEC_MIN_VALUE:1e-6,CU_TOTAL_LOWER_LIMIT:0,CU_TOTAL_UPPER_LIMIT:9999999999999,COUNT_LIMIT:1e4,QUERY_MAX:2e3,DIVERGE_REASON_MAX:255,IC_INPUTS:["spice"],statusJEmap:null,DATE_F:"YYYY-MM-DD",DATETIME_F:"YYYY-MM-DD HH:mm:ss",SHORTSIDE_LOWERLIMIT:1654,LONGSIDE_LOWERLIMIT:2338,
BITSPERSAMPLE_LOWERLIMIT:8,COLORTYPE_LIMIT:"Color",HOLIDAY_TYPE_PAID:"1",HOLIDAY_TYPE_FREE:"2",HOLIDAY_TYPE_DAIQ:"3",RANGE_ALL:"1",RANGE_AM:"2",RANGE_PM:"3",RANGE_TIME:"4",LEAVEMANAGE_VER2:2,getStatusJEmap:function(){return teasp.constant.statusJEmap||(teasp.constant.statusJEmap={},teasp.constant.statusJEmap[teasp.constant.STATUS_NOTADMIT]=teasp.message.getLabel("notFix_label"),
teasp.constant.statusJEmap[teasp.constant.STATUS_NOTREQUEST]=teasp.message.getLabel("tm10003560"),teasp.constant.statusJEmap[teasp.constant.STATUS_CANCEL1]=teasp.message.getLabel("cancelFix_btn_title"),teasp.constant.statusJEmap[teasp.constant.STATUS_CANCEL2]=teasp.message.getLabel("tm10003500"),teasp.constant.statusJEmap[teasp.constant.STATUS_REJECT]=teasp.message.getLabel("tm10003490"),
teasp.constant.statusJEmap[teasp.constant.STATUS_REJECTDONE]=teasp.message.getLabel("rejected_label"),teasp.constant.statusJEmap[teasp.constant.STATUS_WAIT]=teasp.message.getLabel("waitApproval_label"),teasp.constant.statusJEmap[teasp.constant.STATUS_ADMIT]=teasp.message.getLabel("fixed_label"),teasp.constant.statusJEmap[teasp.constant.STATUS_APPROVE]=teasp.message.getLabel("tm10003480"),
teasp.constant.statusJEmap[teasp.constant.STATUS_APPROVING]=teasp.message.getLabel("whileApproving_label"),teasp.constant.statusJEmap[teasp.constant.STATUS_PAYD]=teasp.message.getLabel("reimbursement_label"),teasp.constant.statusJEmap[teasp.constant.STATUS_REASSIGNED]=teasp.message.getLabel("tm10003520"),teasp.constant.statusJEmap[teasp.constant.STATUS_REQUESTED]=teasp.message.getLabel("tm10003470"),
teasp.constant.statusJEmap[teasp.constant.STATUS_CANCEL_WAIT]=teasp.message.getLabel("tf10006200"),teasp.constant.statusJEmap[teasp.constant.STATUS_CANCEL_APPROVE]=teasp.message.getLabel("tf10006210"),teasp.constant.statusJEmap[teasp.constant.STATUS_JOURNAL]=teasp.message.getLabel("tf10006220")),teasp.constant.statusJEmap},getDisplayStatus:function(e){return teasp.constant.getStatusJEmap()[e]||e},
getReverseStatus:function(e){var t,a=teasp.constant.getStatusJEmap();for(t in a)if(a.hasOwnProperty(t)&&a[t]==e)return t;return e},getExpPreFormName:function(e){switch(e){case teasp.constant.EXP_PRE_FORM1:return"tf10001410";case teasp.constant.EXP_PRE_FORM2:return"tf10000600";case teasp.constant.EXP_PRE_FORM3:return"tf10001420";case teasp.constant.EXP_PRE_FORM4:return"tf10006120"}return e},
getDefaultExpPreApplyConfig:function(){return{expenseTypes:[],requireChargeJob:null,requireChargeDept:null,expApply:{startFromList:!1,hiddenApplyBtn:!1,useTitle:!1,useExpenseType:!1,usePayMethod:!1,useApplyDate:!1,usePayDate:!1,useProvisional:!1,useChargeJob:!1,useChargeDept:!1,useExtraItem1:!1,useExtraItem2:!1,useAttachment:!1},"出張・交通費":{msgId:"tf10001410",view:"Form1",order:10,removed:!1,instant:!1,
useExpenseType:!1,usePayMethod:!1,useApplyDate:!1,useProvisional:!1,useChargeDept:!1,useExtraItem1:!1,useExtraItem2:!1,dptArvFlagsOptional:!1,useOverseaTravel:!0,useOneDayTrip:!0,useJtbSect:!1,useAllowanceSect:!0,useCouponTicketSect:!0,useTicketArrangeSect:!0,useProvisionalSect:!0,useFreeInputSect:!0,useAttachment:!1},"会議・交際費":{msgId:"tf10000600",view:"Form2",order:20,removed:!1,instant:!1,useExpenseType:!1,
usePayMethod:!1,useApplyDate:!1,useProvisional:!1,useChargeDept:!1,useExtraItem1:!1,useExtraItem2:!1,useProvisionalSect:!0,useAttachment:!1},"一般経費":{msgId:"tf10001420",view:"Form3",order:30,removed:!1,instant:!1,useExpenseType:!1,usePayMethod:!1,useApplyDate:!1,useProvisional:!1,useChargeDept:!1,useExtraItem1:!1,useExtraItem2:!1,useProvisionalSect:!0,useAttachment:!1},"仮払申請":{msgId:"tf10006120",view:"Form4",order:40,
removed:!0,instant:!1,useExpenseType:!1,usePayMethod:!1,useChargeDept:!1,useExtraItem1:!1,useExtraItem2:!1,useAttachment:!1}}},getExpPreApplyConfig:function(e){var t=teasp.constant.getDefaultExpPreApplyConfig();if(e)for(var a in e)e.hasOwnProperty(a)&&(t[a]&&"object"==typeof t[a]?t[a]=dojo.mixin(t[a],e[a]):t[a]=e[a]);return t["出張・交通費"].useChargeJob=!1,t}},teasp.provide("teasp.logic.Message"),
teasp.logic.Message=function(e,t){this.labels={},this.languageLocaleKey="ja",this.mergeLabels(e),this.mergeLabels(t)},teasp.logic.Message.prototype.getLanguageLocaleKey=function(){return this.languageLocaleKey},teasp.logic.Message.prototype.setLanguageLocaleKey=function(e){teasp.util.init(),this.languageLocaleKey=e},teasp.logic.Message.prototype.isJp=function(){return"ja"==this.languageLocaleKey},
teasp.logic.Message.prototype.mergeLabels=function(e,t){if(e){for(var a in e)e.hasOwnProperty(a)&&("object"==typeof e[a]?(this.labels[a]||(this.labels[a]={}),this.mergeLabels(e[a],this.labels[a])):t?t[a]=e[a]:this.labels[a]=e[a]);var o=this.getLabel("zv00000010");o&&(DATE_FORM_S={datePattern:o,selector:"date"})}},teasp.logic.Message.prototype.getLabel=function(){var e="",t=arguments;t[0]&&(e=this.labels[t[0]]||"");
for(var a=1;a<t.length;a++)e=e.replace(RegExp("\\{"+(a-1)+"\\}","g"),t[a]);return e},teasp.logic.Message.prototype.mixLabel=function(e){var t="";0<e.length&&(t=this.labels[e[0]]||"");for(var a=1;a<e.length;a++)t=t.replace(RegExp("\\{"+(a-1)+"\\}","g"),this.labels[e[a]]||"");return t},teasp.logic.Message.prototype.getLabel2=function(e,t){for(var a=this.labels[e]||"",o=0;o<t.length;o++)a=a.replace(RegExp("\\{"+o+"\\}",
"g"),t[o]);return a},teasp.logic.Message.prototype.format=function(){var e=arguments,t="";0<e.length&&(t=e[0]||"");for(var a=1;a<e.length;a++)t=t.replace(RegExp("\\{"+(a-1)+"\\}","g"),e[a]||"");return t},teasp.logic.Message.prototype.setLabelHtml=function(e,t){var a=dojo.byId(e);null!=a&&(a.innerHTML=teasp.message.getLabel(t=null==t?e:t))},teasp.logic.Message.prototype.setLabelTitle=function(e,t){var a=dojo.byId(e);
null!=a&&(a.title=teasp.message.getLabel(t=null==t?e:t))},teasp.logic.Message.prototype.setLabelEx=function(){var e,t=arguments,a=dojo.byId(t[0]);a&&("string"==typeof t[1]?a.innerHTML=teasp.message.getLabel(t[1]):1!=(e="number"==typeof t[1]?2:1)&&t[1]?a.title=is_array(t[e])?teasp.message.getLabel.apply(this,t[e]):teasp.message.getLabel(t[e]):a.innerHTML=is_array(t[e])?teasp.message.getLabel.apply(this,t[e]
):teasp.message.getLabel(t[e]))},teasp.logic.Message.convertArgs=function(e){if(!e||"object"!=typeof e)return[];if(dojo.isArray(e))return e;var t,a=[];for(t in e)e.hasOwnProperty(t)&&(a[parseInt(t,10)]=e[t]);return a},teasp.logic.Message.prototype.getErrorMessage=function(e){return"object"==typeof e?(e=e.error&&"object"==typeof e.error?e.error:e).messageId?teasp.message.getLabel2(e.messageId,
teasp.logic.Message.convertArgs(e.args)):e.message||e.name||"Error":e||"Error"},teasp.logic.Message.prototype.alertError=function(e){teasp.tsAlert(this.getErrorMessage(e))},teasp.message=new teasp.logic.Message,{});!function(){"use strict";function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(
this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap=null,indent=null,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep=null;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0
).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var a,o,s,i,r=null,n=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),typeof(l="function"==typeof rep?rep.call(t,e,l):l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,i=[],
"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,a=0;a<s;a+=1)i[a]=str(a,l)||"null";return o=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+n+"]":"["+i.join(",")+"]",gap=n,o}if(rep&&"object"==typeof rep)for(s=rep.length,a=0;a<s;a+=1)"string"==typeof rep[a]&&(o=str(r=rep[a],l))&&i.push(quote(r)+(gap?": ":":")+o);else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(o=str(r,l)
)&&i.push(quote(r)+(gap?": ":":")+o);return o=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+n+"}":"{"+i.join(",")+"}",gap=n,o}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,a){var o;if(indent=gap="","number"==typeof a)for(o=0;o<a;o+=1)indent+=" ";else"string"==typeof a&&(indent=a);if(!(rep=t)||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});
throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var a,o=null,s=e[t];if(s&&"object"==typeof s)for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(void 0!==(a=walk(s,o))?s[o]=a:delete s[o]);return reviver.call(e,t,s)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0
).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),teasp.provide("teasp.util"),teasp.util=function(){},
teasp.util.FIVE_RATE_LAST_DATE="2014-03-31",teasp.util.EIGHT_RATE=8,teasp.util.filtValue=function(e,t){return e||t||""},teasp.util.limitChars=function(e,t,a){e.value.length>t&&(a&&alert(a),e.value=e.value.substr(0,t)),e.focus()},teasp.util.strToDate=function(e){var t,a,o,e=(e||"").trim();return""==e?{date:null,dater:null,datef:null,failed:1,tmpl:teasp.message.getLabel("tm00000050")}:(
a=/^(\d{4})[\D](\d{1,2})[\D](\d{1,2})$/.exec(e))?(t=parseInt(a[1],10),o=parseInt(a[2],10),a=parseInt(a[3],10),(o=teasp.util.date.parseDate(t+"-"+o+"-"+a))&&1900<=t&&t<3e3?{date:o,dater:teasp.util.date.formatDate(o,"SLA"),datef:teasp.util.date.formatDate(o),failed:0,tmpl:null}:{date:null,dater:null,datef:null,failed:3,tmpl:teasp.message.getLabel("tm00000060")}):(o=teasp.util.date.parseDate(e))?{date:o,
dater:teasp.util.date.formatDate(o,"SLA"),datef:teasp.util.date.formatDate(o),failed:0,tmpl:null}:{date:null,dater:null,datef:null,failed:2,tmpl:teasp.message.getLabel("tm00000071")}},teasp.util.searchYearMonthDate=function(e,t,a,o){var s,i,r,n;return"string"==typeof e&&(e=parseInt(e,10)),"string"==typeof t&&(t=parseInt(t,10)),"string"==typeof o&&(o=teasp.util.date.parseDate(o)),a?(s=Math.floor(a/100),i=a%100,
2==t&&1<e&&0==--i&&(i=12,s--),r=new Date(s,i-1,e),n=teasp.util.date.addDays(teasp.util.date.addMonths(r,1),-1),{yearMonth:a,startDate:teasp.util.date.formatDate(r),endDate:teasp.util.date.formatDate(n)}):(s=o.getFullYear(),i=o.getMonth()+1,2!=t&&o.getDate()<e?0==--i&&(i=12,s--):2==t&&1<e&&e<=o.getDate()&&12<++i&&(i=1,s++),a=100*s+i,s=o.getFullYear(),i=o.getMonth()+1,o.getDate()<e&&0==--i&&(i=12,s--),r=new Date(s,i-1,
e),n=teasp.util.date.addDays(teasp.util.date.addMonths(r,1),-1),{yearMonth:a,startDate:teasp.util.date.formatDate(r),endDate:teasp.util.date.formatDate(n)})},teasp.util.extractTimes=function(e){e=e||[];if("string"!=typeof e)return e;for(var t,a,o,s=0<e.indexOf(":")?e.split(":"):e.split(","),i=[],r={},n=0;n<s.length;n++)(t=/(\d{4}|\-\-\-\-)(\d{4}|\-\-\-\-)(\d{2})/.exec(s[n]))?((a={from:t[1],to:t[2],type:parseInt(t[3],
10)}).from="----"!=a.from?parseInt(a.from,10):null,a.to="----"!=a.to?parseInt(a.to,10):null,a.from>a.to&&(a.to=null),a.from==a.to&&(a.from=null),(o=21==a.type||22==a.type?(a.from||"")+":"+(a.to||""):null)&&r[o]||i.push(a),o&&(r[o]=1)):(t=/(\d+)-(\d+)/.exec(s[n]))&&i.push({from:parseInt(t[1],10),to:parseInt(t[2],10),type:teasp.constant.REST_FIX});return i},teasp.util.getStartDayOfWeek=function(e,t){
var e="string"==typeof e?parseInt(e,10):e,t="string"==typeof t?teasp.util.date.parseDate(t):t,a=t.getDay();return teasp.util.date.addDays(t,e==a?-1:e-a-(a<e?7:0))},teasp.util.getStartMonthOfPeriod=function(e,t,a,o){for(var s,e="string"==typeof e?parseInt(e,10):e,i=Math.floor(o/100),r=((l=o%100)<e&&i--,100*(i+1)+e),n=100*i+e,l=e;n<r&&(12<(l+=a)&&(i++,l%=12),s=100*i+l,!(n<=o&&o<s));)n=s;return n},
teasp.util.getObjectByValue=function(e,t,a){for(var o=0;o<e.length;o++){var s=e[o];if(s[t]==a)return s}return null},teasp.util.setDialogPosition=function(e,t,a){var o=document.body.getBoundingClientRect(),s=window.getWindowWidth(),i=window.getWindowHeight(),r=(1100<s&&(s=1100),1250<i&&(i=1250),window.devicePixelRatio&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),-1*o.left),o=-1*o.top,r=r+(s-t||1)/2,s=(
o=!o&&0<window.getScrollY()?window.getScrollY():o)+(i-a||1)/2,n=r<0?0:r,l=s<0?0:s;e._position=dojo.hitch(e,function(){var e=this.domNode.style;e.left=n+"px",e.top=l+"px"})},teasp.util.equalId=function(e,t){return e&&t&&"string"==typeof e&&"string"==typeof t&&15<=e.length&&15<=t.length?e.substring(0,15)==t.substring(0,15):e==t},teasp.util.createCommuterSimpleRoute=function(e){var t={value:"",name:""};if(!e
)return t.name=teasp.message.getLabel("tm00000080"),t;for(var a=teasp.message.getLabel("tm10001520",e.stationFrom.name,e.stationTo.name),o="",s=e.stationVia||[],i=0;i<s.length;i++)""!=o&&(o+=teasp.message.getLabel("tm10001540")),o+=s[i].name;return""!=o&&(a+=teasp.message.getLabel("tm10001530",o)),t.value=t.name=a,t},teasp.util.deleteHasSameJobId=function(e,t){if(0==e.length)return e;for(var a=e.length-1;0<a;){for(
var o=a-1;0<=o;o--){var s=!0;if(t&&(s=e[a].process==e[o].process),e[a].jobId==e[o].jobId&&s){e.splice(a,1);break}}a--}return e},teasp.util.splitByLength=function(e,t){for(var a=[],o=e;0<o.length;){for(var s=t,i=o.substring(0,s),r=s<o.length?o.substring(s,s+2):null;/\r\n$/.test(i)||/ $/.test(i)||/\r$/.test(i)||r&&(/^\r/.test(r)||/^ /.test(r));){var n=o.substring(0,++s);if(i==n)break;r=s<o.length?o.substring(s,s+2
):null,i=n}a.push(o.substring(0,s)),o=o.substring(s)}return a},teasp.util.showErrorArea=function(e,t,a){var e=e?"string"==typeof e?e:teasp.message.getErrorMessage(e):null,o=t?dojo.byId(t):null;if(o&&!a){for(;o.firstChild;)dojo.destroy(o.firstChild);dojo.style(o,{padding:"4px 16px",margin:"2px",width:"100%"}),dojo.toggleClass(o,"disp_table",!0),dojo.toggleClass(o,"disp_none",!1)}e?o?(a?o.innerHTML=e:dojo.create("div",
{style:{color:"red"},innerHTML:e},o),dojo.toggleClass(o,"disp_table",!0),dojo.toggleClass(o,"disp_none",!1)):teasp.tsAlert(e):o&&(dojo.toggleClass(o,"disp_table",!1),dojo.toggleClass(o,"disp_none",!0))},teasp.util.extend=function(e){for(var t=e||{},a=0,o=0,s=arguments.length;a<s;a++)for(o in arguments[a])t[o]=arguments[a][o];return t},teasp.util.excludeNameSpace=function(e){if(teasp.prefixBar)if(is_array(e))for(
var t=0;t<e.length;t++)teasp.util.excludeNameSpace(e[t]);else for(var a in e){var o;e.hasOwnProperty(a)&&(a.substring(0,teasp.prefixBar.length)==teasp.prefixBar?(e[o=a.substring(teasp.prefixBar.length)]=dojo.clone(e[a]),delete e[a],"object"==typeof e[o]&&teasp.util.excludeNameSpace(e[o])):"object"==typeof e[a]&&teasp.util.excludeNameSpace(e[a]))}},teasp.util.parseNumsText=function(e){var t=[];if(!e)return t;for(
var a=e.split(/,/),o=0;o<a.length;o++)/\d+/.test(a[o])&&t.push(parseInt(a[o],10));return t},teasp.util.parseNumText=function(e,t){return/^\d+$/.test(e)?parseInt(e,10):t},teasp.util.levelingDepts=function(e,t){for(var a,o={},s=e.length-1;0<=s;s--){var i=e[s];t&&(i.startDate&&t<i.startDate||i.endDate&&i.endDate<t)&&(i.hidden=!0,i.past=i.endDate&&i.endDate<t,i.future=i.startDate&&t<i.startDate),(o[i.id]=i
).deptCode=i.deptCode||i.code||""}for(s=0;s<e.length;s++)(i=e[s]).parentId&&((a=o[i.parentId])&&!a.hidden||(i.hidden=!0,a?(i.past=a.past,i.future=a.future):i.past=!0));e=e.sort(function(e,t){return e.deptCode<t.deptCode?-1:e.deptCode>t.deptCode?1:0});function p(e,t,a,o){for(var s=t?t.id:null,i=0;i<e.length;i++){var r=e[i];if(r.parentId===s){t&&(t.parentFlag=!0,r.parentMap=t.parentMap?dojo.clone(t.parentMap):{},
r.parentMap[t.id]=t.level,t.hidden&&(r.hidden=!0,r.past=t.past,r.future=t.future)),r.level=t?t.level+1:1;for(var n="",l=1;l<r.level;l++)n+="&nbsp;&nbsp;";r.displayName=n+r.deptCode+"-"+r.name,r.order=a.order++,p(e,r,a,o)}}}return p(e,null,{order:1},t),e.sort(function(e,t){return(e.order||0)-(t.order||0)})},teasp.util.insertHelpIcon=function(e,t){var a=teasp.message.getLabel(e+"Help"),o={key:e};if(a){var s=dojo.byId(
e+"Label");if(s&&"DIV"==s.nodeName){dojo.style(s,"float","left");var i=dojo.create("div",{id:e+"Help",className:"pp_base pp_icon_help "+(t&&t.className||""),style:{float:"left",marginLeft:"4px",marginTop:"2px"}},s,"after");dojo.create("div",{style:{clear:"both"},className:t&&t.className||""},i,"after"),o.handle1=dojo.connect(s,"onmouseover",function(){dojo.toggleClass(i,"pp_icon_help_on",!0),dojo.toggleClass(i,
"pp_icon_help",!1)}),o.handle2=dojo.connect(s,"onmouseout",function(){dojo.toggleClass(i,"pp_icon_help_on",!1),dojo.toggleClass(i,"pp_icon_help",!0)});try{o.tooltip=new dijit.Tooltip({connectId:[e+"Label",e+"Help"],label:a,position:["below"]})}catch(e){console.log(e.message)}}}return o},teasp.util.HelpIcon=function(e){var t=e.id,a=e.message,o=e.className||"";const s=e.eventTarget||[],i=dojo.create("div",{id:t,
className:"pp_base pp_icon_help "+o});this.node=i,s.forEach(function(e){dojo.connect(e,"onmouseover",function(){dojo.toggleClass(i,"pp_icon_help_on",!0),dojo.toggleClass(i,"pp_icon_help",!1)}),dojo.connect(e,"onmouseout",function(){dojo.toggleClass(i,"pp_icon_help_on",!1),dojo.toggleClass(i,"pp_icon_help",!0)})});try{var r=s.map(function(e){return e.id});r&&new dijit.Tooltip({connectId:r,label:a,position:["below"]})
}catch(e){console.log(e.message)}},teasp.util.destroyHelpIcon=function(e){var t;e&&(e.handle1&&(dojo.disconnect(e.handle1),e.handle1=null),e.handle2&&(dojo.disconnect(e.handle2),e.handle2=null),e.tooltip&&(e.tooltip.destroy(!0),e.tooltip=null),e.key&&(t=dojo.byId(e.key+"Label"))&&"DIV"==t.nodeName&&(dojo.style(t,"float",null),dojo.query("#"+e.key+"Label ~ div").forEach(function(e){dojo.destroy(e)})))},
teasp.util.init=function(){dojo.connect(dojo.doc,"onkeypress",function(e){void 0===e.target.size&&void 0===e.target.rows&&e.keyCode==dojo.keys.BACKSPACE&&e.preventDefault()}),teasp.util.init=function(){}},teasp.util.setWindowTitle=function(e){if(e)try{var t=document.getElementsByTagName("title");t&&0<t.length&&(t[0].innerHTML=e)}catch(e){}},teasp.util.getPageBox=function(e,t,a,o,s){var i=[],r=1,n=a+o+s;if(e<=n+2)for(
;r<=e;)i.push(r++);else{for(;r<=a;)i.push(r++);if((e==n+3||a-1<t)&&t<a+o+1)for(;r<=a+o+1;)i.push(r++);else if(i.push(null),(e==n+3||t<=e-(s-2))&&e-(o+s)<t)for(r=e-(o+s);r<=e;)i.push(r++);else for(var n=t,t=((t<=a-1||e-(a-1)<t)&&(n=Math.ceil(e/2)),Math.floor(o/2)),l=(r=n-t)+o-1;r<=l;)i.push(r++);if(r<e)for(i.push(null),r=e-(s-1);r<=e;)i.push(r++)}return i},teasp.util.getYearMonthJp=function(e){e=""+e;
return teasp.util.date.formatMonth("zv00000021",e.substring(0,4),e.substring(4))},teasp.util.monthlyPulldown={},teasp.util.monthlyPulldown.create=function(e,t,a,o,s){for(a=""+a;e.firstChild;)dojo.destroy(e.firstChild);var i=dojo.clone(t);o&&null!==a&&(i.contains(a)||i.push(a),i=i.sort(function(e,t){return""!=e&&(""==t||e<t)?1:-1}));for(var r=0;r<i.length;r++){var n=i[r];""==n?dojo.create("option",{value:"",
innerHTML:"----------"},e):dojo.create("option",{value:""+n,innerHTML:teasp.util.getYearMonthJp(n)},e)}s&&dojo.create("option",{value:"*",innerHTML:teasp.message.getLabel("tk10005450")},e),e.value=a},teasp.util.monthlyPulldown.changed=function(t,a,o){try{if("*"==t.value)t.value=a,teasp.manager.dialogOpen("MonthInput",{yearMonth:a},null,this,function(e){o(e.yearMonth)});else{if(""==t.value)return;o(parseInt(t.value,10
))}}catch(e){return void(t.value=a)}},teasp.util.isOldDate=function(e,t,a){var o=teasp.util.getLastFixMonth(e,t,a),s=teasp.util.date.formatDate(teasp.util.date.addMonths(teasp.util.date.getToday(),-12));return function(e){return e<=s||teasp.util.searchYearMonthDate(t,a,null,e).yearMonth<=o}},teasp.util.getLastFixMonth=function(e,t,a){for(var o=teasp.util.searchYearMonthDate(t,a,null,teasp.util.date.getToday()
).yearMonth,s=(e=e.sort(function(e,t){return t-e}),null),i=0;i<e.length;i++){var r=e[i];if(r<o){s=r;break}}return s},teasp.util.entitize=function(e,t){return(e="string"==typeof e?(e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/\"/g,"&quot;")).replace(/{/g,"&#123;")).replace(/}/g,"&#125;")).replace(/\'/g,"&#039;"):e)||t},teasp.util.entitizf=function(e){
return teasp.util.entitize(e,"")},teasp.util.entitizg=function(e){return teasp.util.entitize(e,"&nbsp;")},teasp.util.revetize=function(e,t){return(e="string"==typeof e?(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#123;/g,"{")).replace(/&#125;/g,"}")).replace(/&#039;/g,"'"):e)||t},teasp.util.isIE=function(){var e;return dojo.isIE||(
e=/(msie\s|trident.*rv:)([\w.]+)/.exec(navigator.userAgent.toLowerCase()))&&(dojo.isIE=+e[2]),dojo.isIE},teasp.util.getAncestorByTagName=function(e,t){for(var a=null,o=e;null!=o&&"BODY"!=o.tagName;){if(o.tagName==t){a=o;break}o=o.parentNode}return a},teasp.util.fadeInOut=function(t,a){require(["dojo/_base/fx"],dojo.hitch(this,function(e){(t?e.fadeIn(a):e.fadeOut(a)).play()}))},teasp.util.compareSpans=function(e,t){
for(var a=dojo.clone(t||[]),o=0;o<e.length;o++){for(var s=e[o],i=!1,r=0;r<a.length;r++){var n=a[r];if(s.from==n.from&&s.to==n.to){a.splice(r,1),i=!0;break}}if(!i)return!0}return 0<a.length},teasp.util.sortSpans=function(e){return e.sort(function(e,t){e="number"==typeof e.from?e.from:e.to,t="number"==typeof t.from?t.from:t.to;return"number"==typeof e&&"number"==typeof t?e-t:"number"==typeof e?-1:"number"==typeof t?1:0
})},teasp.util.convertSpanStrings=function(e){for(var t=[],a=0;a<e.length;a++){var o=e[a];t.push(["number"==typeof o.from?teasp.util.time.timeValue(o.from):"","number"==typeof o.to?teasp.util.time.timeValue(o.to):""].join("-"))}return t},teasp.util.dspVal=function(e,t){return"number"==typeof e?""+e:e||(void 0===t?null:t)},teasp.util.convertStr=function(e){if(!e)return"";var e=e.replace(/[！-～]/g,function(e){
return String.fromCharCode(e.charCodeAt(0)-65248)}),t=(e=e.replace(/”/g,'"').replace(/’/g,"'").replace(/‘/g,"`").replace(/￥/g,"\\").replace(/¥/g,"\\").replace(/〜/g,"~").replace(/　/g," ").toUpperCase()).replace(/^\s+|\s+$/g,"");return t||e},teasp.util.getConfigByDate=function(e,t){for(var a=e||[],o=0;o<a.length;o++){var s=a[o];if((!s.startDate||s.startDate<=t)&&(!s.endDate||t<=s.endDate))return s}return null},
teasp.util.getBaseTimeForStock=function(e){return e?e.config?e.config.BaseTimeForStock__c||null:e.baseTimeForStock||null:null},teasp.util.getFutureConfigs=function(e,t){for(var a=e||[],o=[],s=0;s<a.length;s++){var i=a[s];i.startDate&&t<i.startDate&&o.push(i)}return o},teasp.provide("teasp.util.currency"),teasp.util.currency=function(){},teasp.util.currency.calcRoundDecimal=function(e,t){var a=e*Math.pow(10,7);
return Math.round(a)?teasp.util.currency.formatDecimal(e,t).num:0},teasp.util.currency.complexNumber="0123456789０１２３４５６７８９.．",teasp.util.currency.complexMinus="-－",teasp.util.currency.money2number=function(e,t){if(!e)return 0;for(var a=null,o=!1,s=0;s<e.length;s++){var i=e.substring(s,s+1),r=teasp.util.currency.complexNumber.indexOf(i);if(r<0&&t&&null===a&&0<=teasp.util.currency.complexMinus.indexOf(i))o=!0;else if(
0<=r&&r<20)a=(null!==a?10*a:0)+(10<=r?r-10:r);else if(0<r)break}return a*(o?-1:1)},teasp.util.currency.string2number=function(e,t){var a={minus:!1,num:0,str:"",sn1:"",sn2:""};if(!e)return a;for(var o=null,s=null,i=0;i<e.length;i++){var r=e.substring(i,i+1),n=teasp.util.currency.complexNumber.indexOf(r);if(n<0&&t&&null===o&&0<=teasp.util.currency.complexMinus.indexOf(r))a.minus=!0;else if(0<=n&&n<20)null===s?o=(
null!==o?o:"")+(10<=n?n-10:n):s+=10<=n?n-10:n;else if(0<n){if(null!==s)break;null===o&&(o="0"),s=""}}return a.str=(o=o||"0")+(s?"."+s:""),a.sn1=o,!(a.sn2=s)||/^0+$/.test(s)?a.num=parseInt(a.sn1,10):a.num=parseFloat(a.str),a.minus&&(a.num*=-1),a},teasp.util.currency.inputSupportMoney=function(e,t,a,o){o=teasp.util.currency.money2number(e.value,o);return e.value=teasp.util.currency.addFigure(o,!0,t,a),o},
teasp.util.currency.onblurMoney=function(e){teasp.util.currency.inputSupportMoney(e.target)},teasp.util.currency.onkeypressMoney=function(e){""===e.keyChar&&13===e.keyCode&&(teasp.util.currency.inputSupportMoney(e.target),e.preventDefault(),e.stopPropagation())},teasp.util.currency.addFigure=function(e,t,a,o){if("number"==typeof e)e=""+e;else if(!e)return"";for(var s=e.replace(/,/g,"");s!=(s=s.replace(
/^(-?\d+)(\d{3})/,"$1,$2")););return o&&"0"==s?"":(t?teasp.message.getLabel(a?"cunit_html":"cunit_text"):"")+s},teasp.util.currency.formatMoney=function(e,t,a){if("number"==typeof e)e=""+e;else if(!e)return"";for(var o=e.replace(/,/g,"");o!=(o=o.replace(/^(-?\d+)(\d{3})/,"$1,$2")););return a&&"0"==o?"":"#,##0"==t?teasp.message.getLabel("cunit_text")+o:"&#165;#,##0"==t?teasp.message.getLabel("cunit_html"
)+o:"#,##0円"==t?o+teasp.message.getLabel("cunit_jps"):o},teasp.util.currency.formatDecimal=function(e,t,a,o){var s=null,i=null==t?2:t,t=null==a?6:a;if(""===e)return{num:0,n:0,absn:0,str:"",org:"",sn1:"",sn2:"",empty:!0};for(var a=teasp.util.currency.string2number("number"==typeof e?""+e:e,o),s=(a.minus?"-":"")+a.str,e=teasp.util.currency.addFigure((a.minus?"-":"")+a.sn1),o=a.sn1,r=a.sn2||"0",n=/^(\d+?)0*$/.exec(r)[1]
,r="0"==n?"":n;r.length<i;)r+="0";n.length>t&&(r=n=t<=0?"":n.substring(0,t));t=parseFloat(o+"."+(r||"0"))*(a.minus?-1:1);return 0==t&&(a.minus=!1,e=o=s="0"),{minus:a.minus,num:s,n:t,absn:Math.abs(t),str:e+(0<r.length?"."+r:""),org:(a.minus?"-":"")+o+(0<r.length?"."+r:""),sn1:o,sn2:r}},teasp.provide("teasp.util.date"),teasp.util.date=function(){},teasp.util.date.weekJp=[],teasp.util.date.sfTimeZoneOffset=-540,
teasp.util.date.getToday=function(e){var t=new Date;return e&&1!=e||t.setMinutes(t.getMinutes()+t.getTimezoneOffset()-(e?0:teasp.util.date.sfTimeZoneOffset)),t},teasp.util.date.getCurrentTime=function(e){e=e||new Date;return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"."+e.getMilliseconds()},teasp.util.date.longToDate=function(e,t){var a=new Date;
return a.setTime(e),t&&1!=t||a.setMinutes(a.getMinutes()+a.getTimezoneOffset()-(t?0:teasp.util.date.sfTimeZoneOffset)),a},teasp.util.date.getWeekJp=function(e){return(!teasp.util.date.weekJp||teasp.util.date.weekJp.length<=0)&&(teasp.util.date.weekJp=[teasp.message.getLabel("tm00000100"),teasp.message.getLabel("tm00000101"),teasp.message.getLabel("tm00000102"),teasp.message.getLabel("tm00000103"),
teasp.message.getLabel("tm00000104"),teasp.message.getLabel("tm00000105"),teasp.message.getLabel("tm00000106")]),teasp.util.date.weekJp[e]},teasp.util.date.parseDate=function(e){var t,a,o,s,i,r,n,l;return(t=/\d{8}/.exec(e))?(i=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),l=parseInt(e.substring(6),10),new Date(i,r-1,l)):(t=/^(\d+)[\-](\d+)[\-](\d+)\s*(.*)$/.exec(e))?(i=parseInt(t[1],10),r=parseInt(
t[2],10),l=parseInt(t[3],10),(s=t[4])&&(t=/^(\d+):(\d+):?(\d*)$/.exec(s))?(a=parseInt(t[1],10),o=parseInt(t[2],10),s=parseInt(t[3],10),n=!1,24<=a&&(a-=24,n=!0),s=new Date(i,r-1,l,a,o,s||0),n?teasp.util.date.addDays(s,1,!0):s):new Date(i,r-1,l)):e?(n=!1,(t=/(.+) (\d{2}):(\d{2})$/.exec(e))&&(e=t[1],n=!0,a=parseInt(t[2],10),o=parseInt(t[3],10)),(l=dojo.date.locale.parse(e,DATE_FORM_S))?n?new Date(l.getFullYear(),
l.getMonth(),l.getDate(),a,o,0):l:null):null},teasp.util.date.parseDate2=function(e,t){var e=teasp.util.date.parseDate(e),a=Math.floor(t/1440);return 0<a&&(e=teasp.util.date.addDays(e,a),t-=1440*a),new Date(e.getFullYear(),e.getMonth()-1,e.getDate(),Math.floor(t/60),t%60,0)},teasp.util.date.formatDate=function(e,t,a){if(!e)return"";try{var o,s=e;return"string"==typeof e?s=teasp.util.date.parseDate(e
):"number"==typeof e&&(s=teasp.util.date.longToDate(e,void 0===a?1:a)),"M/d"===t?s.getMonth()+1+"/"+s.getDate():"+M/d"===t?"ja"==dojo.locale?s.getFullYear()==teasp.util.date.getToday().getFullYear()?s.getMonth()+1+"/"+s.getDate():s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate():s.getFullYear()==teasp.util.date.getToday().getFullYear()?dojo.date.locale.format(s,{selector:"date",datePattern:"MMM d"}
):dojo.date.locale.format(s,{selector:"date",datePattern:"MMM d, y"}):"M/d+"===t?"ja"==dojo.locale?dojo.date.locale.format(s,{selector:"date",datePattern:"M/d (EEE)"}):dojo.date.locale.format(s,{selector:"date",datePattern:"MMM d (EEE)"}):"yyyyMMdd"===t?s.getFullYear()+(s.getMonth()<9?"0":"")+(s.getMonth()+1)+(s.getDate()<10?"0":"")+s.getDate():"SLA"===t?"ja"==dojo.locale?s.getFullYear()+"/"+(s.getMonth()<9?"0":"")+(
s.getMonth()+1)+"/"+(s.getDate()<10?"0":"")+s.getDate():dojo.date.locale.format(s,DATE_FORM_S):"JP1"===t?dojo.date.locale.format(s,{selector:"date",formatLength:"full"}):"JP2"===t?dojo.date.locale.format(s,{selector:"date",datePattern:teasp.message.getLabel("tm10001550")}):"JPW"===t?1<(o=dojo.date.locale.format(s,{selector:"date",datePattern:"EEE"})).length?o.substring(0,1):o:s.getFullYear()+"-"+(s.getMonth(
)<9?"0":"")+(s.getMonth()+1)+"-"+(s.getDate()<10?"0":"")+s.getDate()}catch(e){}return"???"},teasp.util.date.formatDateTime=function(e,t,a){"string"==typeof e?e=teasp.util.date.parseDate(e):"number"==typeof e?e=teasp.util.date.longToDate(e):a||(e=new Date(e)).setMinutes(e.getMinutes()-teasp.util.date.sfTimeZoneOffset);var a=e.getMonth()+1,o=e.getDate(),s=e.getHours(),i=e.getMinutes(),r=e.getSeconds();
return"SLA-HM"===t||"SLA-HMS"===t?teasp.util.date.formatDate(e,"SLA")+" "+(s<10?"0":"")+s+":"+(i<10?"0":"")+i+("SLA-HMS"===t?":"+(r<10?"0":"")+r:""):"SLA-HMK"===t?teasp.util.date.formatDate(e,"SLA")+"("+(s<10?"0":"")+s+":"+(i<10?"0":"")+i+")":"HM"===t?(s<10?"0":"")+s+":"+(i<10?"0":"")+i:"N14"===t?e.getFullYear()+(a<10?"0":"")+a+(o<10?"0":"")+o+(s<10?"0":"")+s+(i<10?"0":"")+i+(r<10?"0":"")+r:e.getFullYear()+"-"+(
a<10?"0":"")+a+"-"+(o<10?"0":"")+o+" "+(s<10?"0":"")+s+":"+(i<10?"0":"")+i+":"+(r<10?"0":"")+r},teasp.util.date.getTzDateTime=function(e){return(e=new Date(e)).setMinutes(e.getMinutes()-teasp.util.date.sfTimeZoneOffset),e},teasp.util.date.formatDateTimeTz=function(e,t){var t=t||0,a=Math.floor(t/36e5),o=Math.floor(t/6e4),s=Math.floor(t/1e3),t=t%1e3,i=teasp.util.date.sfTimeZoneOffset,e=teasp.util.date.formatDate(e
)+"T"+(a<10?"0":"")+a+":"+(o<10?"0":"")+o+":"+(s<10?"0":"")+s+"."+(t<100?t<10?"00":"0":"")+t+(i?i<0?"+":"-":"Z");return i&&(i=Math.abs(i),e+=((a=Math.floor(i/60))<10?"0":"")+a+":"+((o=i%60)<10?"0":"")+o),e},teasp.util.date.formatTime=function(e){var t=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return(t<10?"0":"")+t+":"+(a<10?"0":"")+a+":"+(o<10?"0":"")+o+"."+e.getMilliseconds()},
teasp.util.date.formatDateRange=function(e,t,a){e="string"==typeof e?teasp.util.date.parseDate(e):new Date(e),t="string"==typeof t?teasp.util.date.parseDate(t):new Date(t);return t&&0!==teasp.util.date.compareDate(e,t)?teasp.message.getLabel("tm10003590",teasp.util.date.formatDate(e,a),teasp.util.date.formatDate(t,a)):teasp.util.date.formatDate(e,a)},teasp.util.date.compareDate=function(e,t){
e="string"==typeof e?teasp.util.date.parseDate(e):new Date(e),t="string"==typeof t?teasp.util.date.parseDate(t):new Date(t);return 1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate()-(1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate())},teasp.util.date.addDays=function(e,t,a){var o=e,s="string"==typeof e,e=("string"==typeof e&&(o=teasp.util.date.parseDate(e)),a||o.setHours(10),new Date);return e.setTime(o.getTime(
)+864e5*t),s?teasp.util.date.formatDate(e):e},teasp.util.date.addMonths=function(e,t){var a=e,o="string"==typeof e,e=("string"==typeof e&&(a=teasp.util.date.parseDate(e)),teasp.util.date.computeMonth(a.getFullYear(),a.getMonth()+1,a.getDate(),t));return o?teasp.util.date.formatDate(e):e},teasp.util.date.getMonthEndDay=function(e,t){return new Date(e,t,0).getDate()},teasp.util.date.computeMonth=function(e,t,a,o){t+=o,
o=teasp.util.date.getMonthEndDay(e,t);return new Date(e,t-1,o<a?o:a)},teasp.util.date.daysInRange=function(e,t){e="string"==typeof e?teasp.util.date.parseDate(e):new Date(e),t=("string"==typeof t?teasp.util.date.parseDate(t):new Date(t))-e;return Math.round(t/864e5+(t<0?-1:1))},teasp.util.date.getDateList=function(e,t){for(var e="string"==typeof e?teasp.util.date.parseDate(e):new Date(e),
a="string"==typeof t?teasp.util.date.parseDate(t):new Date(t),o=[],s=e;teasp.util.date.compareDate(s,a)<=0;)o.push(teasp.util.date.formatDate(s)),s=teasp.util.date.addDays(s,1);return o},teasp.util.date.maxDate=function(e,t){return!e&&t||e&&t&&teasp.util.date.compareDate(e,t)<0?t:e},teasp.util.date.minDate=function(e,t){return!e&&t||e&&t&&teasp.util.date.compareDate(t,e)<0?t:e},teasp.util.date.addYearMonth=function(e
,t){var a=Math.floor(e/100),e=e%100;return 12<(e+=t)?(a+=Math.floor(e/12),e%=12):e<1&&(t=-1*e,a-=Math.floor(t/12)+1,e=12-t%12),0==e&&(a--,e=12),100*a+e},teasp.util.date.getWeekJpByNumArray=function(e){for(var t=[],a=0;a<e.length;a++)t.push(teasp.util.date.getWeekJp(e[a]));return t.join(",")},teasp.util.date.excludeNums=function(e,t){if(!t||t.length<=0)return e;for(var a=e.length-1;0<=a;a--){var o=e[a];t.contains(o
)&&e.splice(a,1)}return e},teasp.util.date.getWeekByDate=function(e,t){if("string"==typeof e&&(e=teasp.util.date.parseDate(e)),t<0||6<t)return[];for(var a=teasp.util.date.addDays(e,-6),o=[];o.length<7;)(a.getDay()==t||0<o.length)&&o.push(teasp.util.date.formatDate(a)),a=teasp.util.date.addDays(a,1);return o},teasp.util.date.divideDateList=function(e,t){if(!e||!e.length)return[];var a,o=null,s=null,i=(
100<=t?o=t-100:s=t,e=e.sort(function(e,t){return e<t?-1:e==t?0:1}),teasp.util.date.parseDate(e[0])),r=teasp.util.date.parseDate(e[e.length-1]),n=[],l=null;for(l=null!==o?(a=i.getDay(),i=teasp.util.date.addDays(i,o-a-(a<o?7:0),!0),function(e){return teasp.util.date.addDays(e,7,!0)}):(s<(a=i.getDate())?i=teasp.util.date.addDays(i,s-a,!0):a<s&&(i=teasp.util.date.addMonths(teasp.util.date.addDays(i,s-a,!0),-1)),function(
e){return teasp.util.date.addMonths(e,1)});i<=r;){for(var p=l(i),d={mind:teasp.util.date.formatDate(i),maxd:teasp.util.date.formatDate(p),lst:[]},c=0;c<e.length;c++){var u=e[c];d.mind<=u&&u<d.maxd&&d.lst.push(e[c])}0<d.lst.length&&(d.sd=d.lst[0],d.ed=d.lst[d.lst.length-1],n.push(d)),i=p}return n},teasp.util.date.formatMonth=function(e,t,a,o){"string"==typeof t&&(t=parseInt(t,10)),"string"==typeof a&&(a=parseInt(a,10)
);t=new Date(t,a-1,1);return dojo.date.locale.format(t,{datePattern:teasp.message.getLabel(e||"zv00000021"),selector:"date"})+teasp.util.date.dispSubNo(o)},teasp.util.date.dispSubNo=function(e){return e?"("+(e+1)+")":""},teasp.util.date.dateRangeOfYear=function(e,t,a,o,s){e="string"==typeof e?parseInt(e,10):e,a="string"==typeof a?parseInt(a,10):a,t="string"==typeof t?parseInt(t,10):t,o="string"==typeof o?parseInt(o,
10):o,s="string"==typeof s?parseInt(s,10):s,2==o&&(e=1<e?e-1:12),2==t&&(s=1<s?s-1:12),o=new Date(s,e-1,a),t=teasp.util.date.addDays(teasp.util.date.addMonths(o,12),-1,!0);return{sd:teasp.util.date.formatDate(o),ed:teasp.util.date.formatDate(t)}},teasp.util.date.convDateTimeZone=function(e){var t=-1*teasp.util.date.sfTimeZoneOffset,a=Math.floor(t/60),o=t%60,a=(a<10?"0":"")+a+":"+(o<10?"0":"")+o;return moment(e
).format("YYYY-MM-DD")+"T00:00:00"+(0==t?"Z":(0<t?"+":"-")+a)},teasp.util.date.joinEx=function(e,t){if(!e||!e.length)return"";e=e.sort(function(e,t){return e<t?-1:1});for(var a=[],o=null,s="YYYY-MM-DD",i=0;i<e.length;i++){var r,n=e[i];o&&moment(o,s).add(1,"d").format(s)==n?(l=(r=a[a.length-1]).indexOf(":"),a[a.length-1]=(l<0?r:r.substring(0,l))+":"+n):a.push(n),o=n}for(var l,p,d,i=0;i<a.length;i++)(l=(n=a[i]
).indexOf(":"))<0?a[i]=moment(n,s).format("M/D"):(p=moment(n.substring(0,l),s),d=moment(n.substring(l+1),s),p.month()==d.month()?a[i]=p.format("M/D")+"-"+d.format("D"):a[i]=p.format("M/D")+"-"+d.format("M/D"));return a.join(t||", ")},teasp.provide("teasp.util.time"),teasp.util.time=function(){},teasp.util.time.zenkakuNumber="０１２３４５６７８９",teasp.util.time.timeform={form:"h:mm",round:1},
teasp.util.time.setTimeFormat=function(e){teasp.util.time.timeform=e},teasp.util.time.zenNum2han=function(e){var t,a,o="";if(e)for(t=0;t<e.length;t++)(a=e.substring(t,t+1)).match(/\d/)?o+=a:"."===a||"．"===a?o+=".":":"===a||"："===a?o+=":":0<=(a=teasp.util.time.zenkakuNumber.indexOf(a))&&(o+=a);return o},teasp.util.time.supportTime=function(e,t,a,o){var s,i,r,n="",t=t||teasp.util.time.timeform,
e=teasp.util.time.zenNum2han(e);if(/^\d{5,}$/.test(e)&&(e=e.substring(0,4)),(r=/^(\d{3,4})$/.exec(e))&&(s=parseInt(r[1],10),p=Math.floor(s/100),s=s%100,e="h:mm"===t.form?(60<s&&(p++,s%=60),p+":"+(s<10?"0"+s:s)):p+"."+s),r=/^(\d*)(:|\.)?(\d*)$/.exec(e))if(p=r[1],e=r[2],r=r[3],i=p?parseInt(p,10):0,l=r?parseInt(r,10):0,!p||48<i)n="";else{"."===e&&(l=Math.round(60*parseFloat("0."+(r||l))));var l,p=!1;if(60<=(l=!(
p=l<60&&o&&o.split(",").contains(""+(60*i+l))?!0:p)&&1<t.round&&a?1===(e=t[a])?t.round*Math.floor(l/t.round):2===e?t.round*Math.ceil(l/t.round):t.round*Math.round(l/t.round):l)&&(l-=60*(s=Math.floor(l/60)),48<(i+=s)))return"";n="h:mm"===t.form?i+":"+(l<10?"0"+l:l):i+"."+((l=Math.round(100*l/60))<10?"0"+l:l)}return n},teasp.util.time.supportTimeL=function(e,t,a){var o,s,i,r,n,l="",t=t||teasp.util.time.timeform,
e=teasp.util.time.zenNum2han(e);return/^\d{6,}$/.test(e)&&(e=e.substring(0,5)),(n=/^(\d{4,5})$/.exec(e))&&(o=parseInt(n[1],10),s=Math.floor(o/100),o=o%100,e="h:mm"===t.form?(60<o&&(s++,o%=60),s+":"+(o<10?"0"+o:o)):s+"."+o),(n=/^(\d*)(:|\.)?(\d*)$/.exec(e))&&(s=n[1],e=n[2],n=n[3],i=s?parseInt(s,10):0,r=n?parseInt(n,10):0,l=s?(60<=(r="."===e?Math.round(60*parseFloat("0."+(n||r))):r)&&(r-=60*(o=Math.floor(r/60)),i+=o),
"h:mm"===t.form?i+":"+(r<10?"0"+r:r):i+"."+((r=Math.round(100*r/60))<10?"0"+r:r)):""),l},teasp.util.time.inputSupportTime=function(e){var t;6===e.maxLength?e.value=teasp.util.time.supportTimeL(e.value):(t=null,dojo.hasClass(e,"roundBegin")?t="roundBegin":dojo.hasClass(e,"roundEnd")&&(t="roundEnd"),e.value=teasp.util.time.supportTime(e.value,null,t,dojo.attr(e,"fxtimes")))},teasp.util.time.onblurTime=function(e){
teasp.util.time.inputSupportTime(e.target)},teasp.util.time.onkeypressTime=function(e){13===e.keyCode?(teasp.util.time.inputSupportTime(e.target),e.preventDefault(),e.stopPropagation()):void 0===e.target.size&&void 0===e.target.rows&&e.keyCode==dojo.keys.BACKSPACE&&(e.preventDefault(),e.stopPropagation())},teasp.util.time.timeValue=function(e,t,a){t=t||"hh:mm";if(0===e)return a?"":"hh:mm"===t?"0:00":"0.00";if(!e
)return"";var a=e<0,o=(a&&(e=Math.abs(e)),Math.floor(e/60)),e=Math.round(e)%60;return"hh:mm"!==t?(a?"-":"")+o+"."+((e=Math.round(100*e/60))<10?"0":"")+e:(a?"-":"")+o+":"+(e<10?"0":"")+e},teasp.util.time.clock2minutes=function(e){var t;if(t=/(\d+)(:|\.)(\d+)/.exec(e))return":"===t[2]?60*parseInt(t[1],10)+parseInt(t[3],10):Math.round(60*parseFloat(e))},teasp.util.time.sliceTime=function(e,t){
return"number"!=typeof t.from||"number"!=typeof t.to?[{from:e.from,to:e.to,id:e.id}]:e.from<t.from&&e.to>t.to?[{from:e.from,to:t.from,id:e.id},{from:t.to,to:e.to,id:e.id}]:e.from<t.from&&e.to==t.to||e.from<t.from&&e.to<t.to&&e.to>t.from?[{from:e.from,to:t.from,id:e.id}]:e.from==t.from&&e.to>t.to||e.from>t.from&&e.from<t.to&&e.to>t.to?[{from:t.to,to:e.to,id:e.id}
]:e.from<t.from&&e.to<t.to&&e.to==t.from||e.from<t.from&&e.to<t.to&&e.to<t.from||e.from>t.from&&e.from==t.to&&e.to>t.to||e.from>t.from&&e.from>t.to?[{from:e.from,to:e.to,id:e.id}]:[]},teasp.util.time.sliceTimes=function(e,t){for(var a,o=[],s=0;s<e.length;s++){var i=teasp.util.time.sliceTime(e[s],t);if(o.length<=0)o=i;else for(a=0;a<i.length;a++)o.push(i[a])}return o},teasp.util.time.rangeTime=function(e,t){for(var a,
o=0,s=0;s<t.length;s++)"number"==typeof(a=t[s]).from&&"number"==typeof a.to&&(e.from<a.from&&a.to<e.to?o+=a.to-a.from:e.from>a.from&&e.to<a.to?o+=e.to-e.from:e.from<=a.from&&e.to<=a.to&&a.from<e.to?o+=e.to-a.from:e.from>=a.from&&e.to>=a.to&&e.from<a.to&&(o+=a.to-e.from));return o},teasp.util.time.margeTimeSpans=function(e){for(var t=(t=dojo.clone(e)).sort(function(e,t){
return e.from!=t.from?e.from-t.from:e.to!=t.to?e.to-t.to:0}),a=[],o=0;o<t.length;o++){var s=t[o];a.length<=0||a[a.length-1].to<s.from||a[a.length-1].from>s.to?a.push(s):a[a.length-1].to<s.to&&(a[a.length-1].to=s.to)}return a},teasp.util.time.excludeRanges=function(e,t){var a=e?dojo.clone(e):[];if(0<a.length)for(var o=0;o<t.length;o++)a=teasp.util.time.sliceTimes(a,t[o]);return a},
teasp.util.time.isValidRange=function(e,t){return"number"==typeof e&&"number"==typeof t&&e<t},teasp.util.time.isInputTime=function(e,t,a){return a?teasp.util.time.isValidRange(e,t):"number"==typeof e||"number"==typeof t},teasp.util.time.includeRanges=function(e,t,a){for(var a=a||2880,o=(t=t.sort(function(e,t){return e.from-t.from}),[]),s=0,i=0;i<t.length;i++){var r=t[i];s<r.from&&o.push({from:s,to:r.from}),s=r.to}
return 0<=s&&s<a&&o.push({from:s,to:a}),teasp.util.time.excludeRanges(e,o)},teasp.provide("teasp.action.contact"),teasp.action.contact=function(){},teasp.action.contact.remoteMethod=function(e,t,a,o){t="string"==typeof t?t:t.length?t.join(","):dojo.toJson(t);teasp.timestamp(e+" queryString = "+t);try{RtkPotalCtl[e](t,function(e,t){teasp.timestamp("recv-response"),t.status?("NG"==e.result&&(console.log(e),
e.error.message=teasp.message.getErrorMessage(e.error)),a(e)):(console.log(t),teasp.constant.TIMEOUT_CAUSE.test(t.message)&&(t.message=teasp.message.getLabel("tm00000011",t.message)),o(t))},{escape:!1})}catch(e){console.log(e.message),console.log(e),o(e)}},teasp.action.contact.remoteMethod2=function(e,t,a,o,s){var i=!1,t="string"==typeof t?t:is_array(t)&&0<t.length&&"string"==typeof t[0]?t.join(","):(i=t.keepNs,
dojo.toJson(t));console.log(e+" queryString = "+t);try{teasp.controlClass[e](t,function(e,t){try{t.status?"NG"!=e.result?(i||teasp.util.excludeNameSpace(e),o(e)):(console.log(t),s?s(e):teasp.util.showErrorArea(e.error,a)):(teasp.constant.TIMEOUT_CAUSE.test(t.message)&&(t.message=teasp.message.getLabel("tm00000011",t.message)),console.log(t),s?s(t):teasp.util.showErrorArea(t,a))}catch(e){console.log(e),s?s(e
):teasp.util.showErrorArea(e,a)}},{escape:!1})}catch(e){console.log(e),s?s(e):teasp.util.showErrorArea(e,a)}},teasp.action.contact.remoteMethods=function(t,e,a,o,s){var i,r=e&&e.errorAreaId||null,n=e&&e.nowait||!1,l=e&&e.contIfErr||!1,p=(n||teasp.manager.dialogOpen("BusyWait"),teasp.util.showErrorArea(null,r),0);(i=function(){teasp.action.contact.remoteMethod2(t[p].funcName,t[p].params,r,function(e){p+1<t.length?(
a.apply(s,[e,p]),p++,setTimeout(i,100)):(a.apply(s,[e,p]),n||teasp.manager.dialogClose("BusyWait"))},function(e){l||teasp.manager.dialogClose("BusyWait"),o?(o.apply(s,[e,p]),l&&(p+1<t.length?(p++,setTimeout(i,100)):teasp.manager.dialogClose("BusyWait"))):teasp.util.showErrorArea(e,r)})})()},teasp.provide("teasp.action.Manager"),teasp.action.Manager=function(){this.dialogs={},this.option={debugLev:0},
this.completeFlag=!0,this.shim=!1},teasp.manager=new teasp.action.Manager,teasp.action.Manager.prototype.dialogOpen=function(e,t,a,o,s){this.shim&&"BusyWait"==e?dojo.style("shim","display",""):(this.dialogs[e]||(this.dialogs[e]=new teasp.dialog[e]),this.dialogs[e].open(a,t,s,o))},teasp.action.Manager.prototype.dialogClose=function(e){this.shim&&"BusyWait"==e?dojo.style("shim","display","none"
):this.dialogs[e]&&this.dialogs[e].close()},teasp.action.Manager.prototype.dialogRemove=function(e){delete this.dialogs[e]},teasp.action.Manager.prototype.uiBlock=function(e,t){t.hideBusy?t.shim&&(dojo.style("shim","z-index",e?2001:48),dojo.style("shim","display",e?"":"none")):e?this.dialogOpen("BusyWait"):this.dialogClose("BusyWait")},teasp.action.Manager.prototype.completeCheckLoop=function(e,t){var a;
this.completeFlag||300<e.cnt?t():(e.cnt++,a=this,setTimeout(function(){a.completeCheckLoop(e,t)},100))},teasp.action.Manager.prototype.completeCheck=function(e){this.completeFlag?e():(console.log("wait!"),this.completeCheckLoop({cnt:0},e))},teasp.action.Manager.prototype.useShim=function(e){this.shim=e},teasp.action.Manager.prototype.tsConfirmAlert=function(e,t,a,o){this.dialogs.ConfirmAlert||(
this.dialogs.ConfirmAlert=new teasp.dialog.ConfirmAlert);e={type:e};"object"==typeof t?dojo.mixin(e,t):e.message=t,this.dialogs.ConfirmAlert.open(a&&a.pouch||null,e,o,a)},teasp.tsAlert=function(e,t,a){teasp.manager.tsConfirmAlert(0,e,t,a)},teasp.tsConfirm=function(e,t,a){teasp.manager.tsConfirmAlert(1,e,t,a)},teasp.tsConfirmA=function(e,t,a,o){teasp.manager.tsConfirmAlert(1,e,t,function(e){a&&e?a.apply(t
):o&&!e&&o.apply(t)})},teasp.tsConfirmClick=function(e,t,a){return teasp.tsConfirm(e,null,function(e){e&&(a&&dojo.style(a,"display","none"),t&&dojo.byId(t).click())}),!1},teasp.provide("teasp.dialog.Base"),teasp.dialog.Base=function(){this.inited=!1,this.dialog=null,this.id=null,this.args={},this.callback=null,this.thisObject=null,this.bodyId="bodyCell",this.pouch=null,this.title="",this.duration=1,this.content=null,
this.widthHint=null,this.heightHint=null,this.okLink=null,this.cancelLink=null,this.closeLink=null},teasp.dialog.Hack=function(e){this.title=e&&e.title||null,this.id=e&&e.id||null,this.duration=e&&e.duration||null,this.content=null,this.id||(this.id="Dialog"+teasp.sequence.dialog++);var t,e=dojo.byId(this.id);e||(t=(t=dojo.byId("tsfDialog"))||dojo.byId("tsfArea").parentNode,e=dojo.create("div",{id:this.id,
className:"ver-dialog",style:"padding-bottom:80px;min-width:300px;"},t),this.content&&(dojo.byId(this.id).innerHTML=this.content)),this.domNode=e},teasp.dialog.Hack.prototype.attr=function(e,t){this[e]=t,"content"!=e||dojo.byId(this.id).innerHTML||(dojo.byId(this.id).innerHTML=this.content)},teasp.dialog.Hack.prototype.startup=function(){},teasp.dialog.Hack.prototype.show=function(){
teasp.dialogStack.length<=0&&teasp.dialogStack.push("tsfArea"),teasp.dialogStack.unshift(this.id),dojo.style(teasp.dialogStack[1],"display","none"),dojo.style(teasp.dialogStack[0],"display",""),document.body.scrollTop=0},teasp.dialog.Hack.prototype.destroy=function(){var e=dojo.byId(this.id);e&&dojo.destroy(e)},teasp.dialog.Hack.prototype.hide=function(){var e=teasp.dialogStack.shift();
e&&0<teasp.dialogStack.length&&dojo.byId(e)&&dojo.style(e,"display","none"),0<teasp.dialogStack.length&&(e=teasp.dialogStack[0],dojo.style(e,"display",""),"tsfArea"==e&&((e=dojo.byId("graphDiv"))&&(e.scrollLeft=140),(e=dojo.byId("timeGridView"))&&(e.scrollTop=280),teasp.viewPoint&&teasp.viewPoint.viewPostProcess&&teasp.viewPoint.viewPostProcess()))},teasp.dialog.Base.prototype._init=function(){var e,t;this.inited||(
require(["dijit/Dialog"]),this.free(),this.preInit(),this.inited=!0,t={title:this.title,id:this.id,duration:this.duration},this.dialog=new(this.noDialog()?teasp.dialog.Hack:dijit.Dialog)(t),this.dialog.attr("content",this.content),this.okLink&&dojo.byId(this.okLink.id)&&this.baseHandles.push(dojo.connect(dojo.byId(this.okLink.id),"onclick",this,this.okLink.callback)),this.cancelLink&&dojo.byId(this.cancelLink.id
)&&this.baseHandles.push(dojo.connect(dojo.byId(this.cancelLink.id),"onclick",this,this.cancelLink.callback)),this.closeLink&&dojo.byId(this.closeLink.id)&&this.baseHandles.push(dojo.connect(dojo.byId(this.closeLink.id),"onclick",this,this.closeLink.callback)),this.noDialog()&&(t=dojo.byId(this.id))&&((e=dojo.byId(this.id+"_title"))&&dojo.destroy(e),e=dojo.create("div",{id:this.id+"_title",
style:"margin-top:2px;margin-bottom:4px;position:relative;",className:"dijitDialogTitleBar"},t.firstChild,"before"),this.title&&(e.innerHTML=this.title),t=dojo.create("div",{className:"ts-status-img ts-ap_tab_rm",style:"right:2px;top:8px;position:absolute;width:16px;height:14px;"},e),this.baseHandles.push(dojo.connect(t,"onclick",this,this.close))),this.preStart(),this.dialog.startup(),this.postStart())},
teasp.dialog.Base.prototype.free=function(){if(this.baseHandles&&this.baseHandles.length)for(var e=0;e<this.baseHandles.length;e++)dojo.disconnect(this.baseHandles[e]),delete this.baseHandles[e];this.baseHandles=[]},teasp.dialog.Base.prototype.noDialog=function(){return this.pouch&&this.pouch.isNonDialogMode&&this.pouch.isNonDialogMode()&&dojo.byId("tsfArea")&&!this.nohack},teasp.dialog.Base.prototype.show=function(
){this.dialog.show()},teasp.dialog.Base.prototype.hide=function(){this.dialog.hide()},teasp.dialog.Base.prototype.open=function(e,t,a,o){this.pouch=e,this.args=t||{},this.callback=a,this.thisObject=o,this.nohack=this.args.nohack||this.nohack,this.ready(),this._init(),this.preShow()&&(this.show(),this.postShow())},teasp.dialog.Base.prototype.close=function(){this.hide()},teasp.dialog.Base.prototype.ready=function(){},
teasp.dialog.Base.prototype.preInit=function(){},teasp.dialog.Base.prototype.preStart=function(){},teasp.dialog.Base.prototype.postStart=function(){},teasp.dialog.Base.prototype.preShow=function(){return!0},teasp.dialog.Base.prototype.postShow=function(){},teasp.dialog.Base.prototype.ok=function(){return!0},teasp.dialog.Base.prototype.cancel=function(){return!0},teasp.dialog.Base.prototype.onfinishfunc=function(e){
this.callback&&this.callback.apply(this.thisObject||this,arguments)},teasp.provide("teasp.dialog.BusyWait"),teasp.dialog.BusyWait=function(){this.widthHint=140,this.heightHint=80,this.title=teasp.message.getLabel("tm00000040"),this.duration=1,this.content='<table border="0" cellpadding="0" cellspacing="0"><tr><td style="text-align:center;"><div class="busywait"></div></td></tr></table>',this.nohack=!0,
this.id="BusyWait"},teasp.dialog.BusyWait.prototype=new teasp.dialog.Base,teasp.dialog.BusyWait.prototype.preShow=function(){return dojo.query(".dijitDialogCloseIcon",this.dialog.id).forEach(function(e){e.style.display="none"}),!0},teasp.provide("teasp.dialog.BusyWait2"),teasp.dialog.BusyWait2=function(){this.title="",this.duration=0,
this.content='<table border="0" cellpadding="0" cellspacing="0" id="busyWaitTable"><tr><td><div class="busywait2"></div></td><td style="text-align:center;font-size:17px;color:#3B40FF;"><div id="busyWaitMessage" style="background-color:#ffffff;"></div></td></tr></table>',this.nohack=!0},teasp.dialog.BusyWait2.prototype=new teasp.dialog.Base,teasp.dialog.BusyWait2.prototype.preStart=function(){dojo.query(
".dijitDialogTitleBar",this.dialog.id)[0].style.display="none",dojo.style("busyWaitTable","background-color","transparent");var e=dojo.byId("busyWaitTable");dojo.style(e.parentNode,"background-color","transparent"),dojo.style(e.parentNode,"border","none"),dojo.style(e.parentNode.parentNode,"border","none"),dojo.style(e.parentNode.parentNode,"opacity","0"),dojo.addClass(e,"messageArea"),dojo.addClass(
this.dialog.domNode,"messageArea")},teasp.dialog.BusyWait2.prototype.preShow=function(){return this.args.nomove||(this.dialog._position=dojo.hitch(this.dialog,function(){var e=this.domNode.style;e.left="180px",e.top="50px"})),dojo.byId("busyWaitMessage").innerHTML=this.args.message||"www",!0},teasp.provide("teasp.dialog.Calendar"),teasp.dialog.Calendar=function(){this.id="dialogCalendar",
this.title=teasp.message.getLabel("tm60001010"),this.duration=1,
this.content='<table border="0" cellpadding="0" cellspacing="0" style="font-size:12px;"><tr><td style="padding-left:4px;padding-right:4px;"><div id="_atk_cal"></div></td></tr><tr><td style="text-align:center;padding-top:0px;"><input type="button" class="pb_base pb_btn_cancel" id="_atk_cal_cancel" style="font-size:13px;padding:6px 16px;"/></td></tr></table>',this.cancelLink={id:"_atk_cal_cancel",callback:this.close},
this.calendar=null,this.busy=!1},teasp.dialog.Calendar.prototype=new teasp.dialog.Base,teasp.dialog.Calendar.prototype.preInit=function(){dojo.require("dijit.Calendar")},teasp.dialog.Calendar.prototype.preShow=function(){this.busy=!0,this.calendar&&this.calendar.destroy("_atk_cal"),this.calendar=new dijit.Calendar({isDisabledDate:this.args.isDisabledDateFunc},"_atk_cal"),dojo.connect(this.calendar,"onValueSelected",
this,this.selected),this.args.date&&this.calendar.setValue(this.args.date),this.calendar.startup(),this.dialog.startup();var a,o=this;return this.args.date&&(a=("object"==typeof this.args.date?this.args.date:teasp.util.date.parseDate(this.args.date)).getDate(),dojo.query(".dijitCalendarDateLabel","_atk_cal").forEach(function(e){var t;0<=e.parentNode.className.indexOf("dijitCalendarSelectedDate")&&(
e.textContent||e.innerText)==a&&dojo.connect(e.parentNode,"onclick",o,(t=o.args.date,function(){this.selected(t)}))})),!(this.busy=!1)},teasp.dialog.Calendar.prototype.selected=function(){this.busy||(this.dialog.hide(),this.onfinishfunc(arguments[0]))},teasp.provide("teasp.dialog.MonthInput"),teasp.dialog.MonthInput=function(){this.width=180,this.height=180,this.title=teasp.message.getLabel("tk10005450"),
this.id="MonthInputDialog",this.duration=1,
this.content='<table class="pane_table" style="width:160px;"><tr><td style="vertical-align:middle;text-align:center;padding:4px 0px;"><input dojoType="dijit.form.NumberSpinner" value="" constraints="{min:1900,max:2100,pattern:\'####\'}" id="MonthInputY" style="width:60px;border:1px solid #539AC7;font-family:verdana;font-size:13px;" /><span style="padding:0px 8px;font-size:13px;">/</span><input dojoType="dijit.form.NumberSpinner" value="" constraints="{min:1,max:12,pattern:\'00\'}" id="MonthInputM" style="width:42px;border:1px solid #539AC7;font-family:verdana;font-size:13px;" /></td></tr><tr><td style="text-align:center;padding:12px 0px 4px 0px;"><input type="button" id="MonthInputOk" value="OK" style="width:60px;margin-right:8px;padding:2px 4px;" /><input type="button" id="MonthInputCancel" value="Cancel" style="width:60px;margin-left:8px;padding:2px 4px;" /></td></tr></table>'
,this.okLink={id:"MonthInputOk",callback:this.ok},this.cancelLink={id:"MonthInputCancel",callback:this.hide}},teasp.dialog.MonthInput.prototype=new teasp.dialog.Base,teasp.dialog.MonthInput.prototype.preShow=function(){var e,t;return/(\d{6})/.test(this.args.yearMonth)?(t=""+this.args.yearMonth,dojo.byId("MonthInputY").value=t.substring(0,4),dojo.byId("MonthInputM").value=t.substring(4,6)):(e=(t=new Date).getFullYear(
),t=t.getMonth()+1,dojo.byId("MonthInputY").value=""+e,dojo.byId("MonthInputM").value=""+t),!0},teasp.dialog.MonthInput.prototype.ok=function(){var e;dijit.byId("MonthInputY").isValid()&&dijit.byId("MonthInputM").isValid()&&(e=100*parseInt(dojo.byId("MonthInputY").value,10)+parseInt(dojo.byId("MonthInputM").value,10),this.hide(),this.onfinishfunc({yearMonth:e}))},teasp.provide("teasp.dialog.UserSelect"),
teasp.dialog.UserSelect=function(e,t,a){this.thisObject=e,this.inited=!1,this.opend=!1,this.dialog=null,this.id="tooltipUserSelect",
this.content='<div id="userSelectBody"><div style="width:482px;"><div style="margin:0px 0px 4px 0px;"><table class="pane_table" style="width:100%;background-color:#eaf4fc;"><tr><td style="text-align:left;padding:2px 4px;" ><div id="userSelectTitle"></div></td><td style="text-align:right;padding:2px 4px;"><div id="userSelectClose"></div></td></tr></table></div><div style="float:left;margin-left:4px;margin-right:10px;padding-top:2px;" id="columnUserSelectName"></div><div style="float:left;padding-top:1px;margin-right:4px;"><input type="text" id="userSelectName" value="" class="inputran" style="width:100px;padding:1px 2px;" /></div><div style="float:left;"><input type="button" id="userSelectSearch" value="" style="padding:1px 8px;" /></div><div style="clear:both;"></div><div id="userSelectPageArea"><div id="userSelectPage" style="margin-left:10px;"></div></div><table class="stone_table" style="margin-top:4px;"><tr><td class="head" style="width:20px;"></td><td class="head" id="userSelectHeadUserName" style="width:100px;"><div style="margin:auto;" class="disp_table"><div style="margin:2px;" id="userSelectHead1"></div></div></td><td class="head" id="userSelectHeadProfile" style="width:120px;"><div style="margin:auto;" class="disp_table"><div style="margin:2px;" id="userSelectHead2"></div></div></td><td class="head" id="userSelectHeadTitle" style="width:100px;"><div style="margin:auto;" class="disp_table"><div style="margin:2px;" id="userSelectHead3"></div></div></td><td class="head" id="userSelectHeadManager" style="width:140px;"><div style="margin:auto;" class="disp_table"><div style="margin:2px;" id="userSelectHead4"></div></div></td></tr></table><div class="stone_div" id="userSelectDiv" style="width:480px;border:1px solid #cccccc;"></div></div><div id="userSelectErrorArea"></div><table border="0" cellpadding="0" cellspacing="0" style="width:466px;margin-top:4px;margin-bottom:2px;"><tr><td style="text-align:right;"><input type="button" id="userSelectOk" value="" style="width:74px;margin-right:24px;padding:2px 4px;" /></td><td style="text-align:left;"><input type="button" id="userSelectCancel" value="" style="width:74px;margin-left:24px;padding:2px 4px;" /></td></tr></table></div>'
,this.eventHandles=[],this.onSearch=t,this.onSelect=a,this.searchObj=null,this.targets=null,this.maxDivH=120,this.sortMap={1:"Name",2:"Profile.Name",3:"Title",4:"Manager.Name"},this._init()},teasp.dialog.UserSelect.prototype.getDialog=function(e){return e&&(this.targets=e),this.dialog},teasp.dialog.UserSelect.prototype._init=function(){var e;this.inited||(this.inited=!0,e={id:this.id,content:this.content,
onKeyPress:dojo.hitch(this,function(e){27===e.keyCode&&dijit.popup.close(this.dialog)})},this.dialog=new dijit.TooltipDialog(e),this.dialog.startup(),dojo.connect(this.dialog,"onOpen",this,function(){console.log("dialog-onOpen"),this.opened||(dojo.style("userSelectTitle","color","#555555"),dojo.style("userSelectTitle","font-weight","bold"),dojo.byId("userSelectTitle").innerHTML=teasp.message.getLabel("tk10000444"),(
e=dojo.byId("userSelectClose")).style.color="#A0A0A0",e.style.cursor="pointer",e.innerHTML="X",dojo.connect(e,"onclick",this,function(){dijit.popup.close(this.dialog)}),dojo.byId("userSelectOk").disabled=!0,dojo.byId("userSelectSearch").value=teasp.message.getLabel("search_btn_title"),dojo.byId("userSelectOk").value=teasp.message.getLabel("select_btn_title"),dojo.byId("userSelectCancel").value=teasp.message.getLabel(
"cancel_btn_title"),teasp.message.setLabelEx("columnUserSelectName","tk10000390"),teasp.message.setLabelEx("userSelectHead1","tk10000390"),teasp.message.setLabelEx("userSelectHead2","tk10000456"),teasp.message.setLabelEx("userSelectHead3","title_label"),teasp.message.setLabelEx("userSelectHead4","tk10000458"),dojo.connect(dojo.byId("userSelectSearch"),"onclick",this,function(){teasp.util.showErrorArea(null,
"userSelectErrorArea"),this.searchObj={action:"searchUserSimple",userName:dojo.byId("userSelectName").value,pageNo:1,rowMax:20},this.onSearch(this.searchObj,this.searchRes(),this.searchError())}),dojo.connect(dojo.byId("userSelectOk"),"onclick",this,function(){for(var e=dojo.byId("userSelectTbody"),t=0;t<e.rows.length;t++){var a=e.rows[t].cells[0].firstChild;a.checked&&(a={targets:this.targets,
userId:a.nextSibling.value,userName:a.nextSibling.nextSibling.value},this.onSelect(a),dijit.popup.close(this.dialog))}}),dojo.connect(dojo.byId("userSelectCancel"),"onclick",this,function(){dijit.popup.close(this.dialog)}),dojo.connect(dojo.byId("userSelectHeadUserName"),"onclick",this,this.clickHead(1)),dojo.connect(dojo.byId("userSelectHeadProfile"),"onclick",this,this.clickHead(2)),dojo.connect(dojo.byId(
"userSelectHeadTitle"),"onclick",this,this.clickHead(3)),dojo.connect(dojo.byId("userSelectHeadManager"),"onclick",this,this.clickHead(4))),teasp.util.showErrorArea(null,"userSelectErrorArea");var e=dojo.byId("userSelectDiv");e.clientHeight>this.maxDivH&&(dojo.toggleClass(e,"disp_block",!0),dojo.toggleClass(e,"disp_table",!1),dojo.style(e,"height",this.maxDivH+"px")),this.opened=!0}))},
teasp.dialog.UserSelect.prototype.searchRes=function(){var t=this;return function(e){t.refresh.apply(t,[e])}},teasp.dialog.UserSelect.prototype.searchError=function(){var t=this;return function(e){t.receiveError.apply(t,[e])}},teasp.dialog.UserSelect.prototype.refresh=function(e){for(var t=0;t<this.eventHandles.length;t++)dojo.disconnect(this.eventHandles[t]),delete this.eventHandles[t];this.eventHandles=[];for(
var a=e&&e.users||[],o=(dojo.byId("userSelectOk").disabled=!0,dojo.byId("userSelectName").value=e.userName||"",this.setPaging(dojo.byId("userSelectPage"),e),this.displaySort(e),dojo.byId("userSelectDiv"));o.firstChild;)dojo.destroy(o.firstChild);for(var e=dojo.create("table",{className:"stone_table"}),s=dojo.create("tbody",{id:"userSelectTbody"},e),t=0;t<a.length;t++){var i=a[t],r=dojo.create("tr",{
className:"sele "+(t%2==0?"even":"odd")},s),n=dojo.create("td",{style:{width:"22px",textAlign:"center",border:"none"}},r),l=dojo.create("input",{type:"radio",name:"userSelectRadio",id:"userSelectRadio"+(t+1)},n);this.eventHandles.push(dojo.connect(l,"onclick",this,function(e){dojo.byId("userSelectOk").disabled=!1,dojo.isIE<=7&&(e=(e=e||window.event).target||e.srcElement,this.checkSelectRadio(e.id))})),dojo.create(
"input",{type:"hidden",value:i.Id},n),dojo.create("input",{type:"hidden",value:i.Name},n),n=dojo.create("td",{width:"102px",style:{border:"none",textAlign:"left"}},r),dojo.create("div",{innerHTML:i.Name,style:{wordBreak:"break-all"}},n),n=dojo.create("td",{width:"122px",style:{border:"none",textAlign:"left"}},r),dojo.create("div",{innerHTML:i.Profile.Name,style:{wordBreak:"break-all"}},n),n=dojo.create("td",{
width:"102px",style:{border:"none",textAlign:"left"}},r),dojo.create("div",{innerHTML:i.Title||"",style:{wordBreak:"break-all"}},n),n=dojo.create("td",{width:"126px",style:{border:"none",textAlign:"left"}},r),dojo.create("div",{innerHTML:i.Manager&&i.Manager.Name||"",style:{wordBreak:"break-all"}},n),this.eventHandles.push(dojo.connect(r,"onclick",this,function(e){for(var t=(e=e||window.event
).target||e.srcElement;t&&"TR"!=t.nodeName;)t=t.parentNode;t&&"TR"==t.nodeName&&(t.cells[0].firstChild.checked=!0,dojo.byId("userSelectOk").disabled=!1,dojo.isIE<=7&&this.checkSelectRadio(t.cells[0].firstChild.id))}))}o.appendChild(e),this.adjustHeight()},teasp.dialog.UserSelect.prototype.checkSelectRadio=function(e){if(e){var t=dojo.byId("userSelectTbody");if(t&&"TBODY"==t.nodeName)for(var a=t.rows.length,
o=1;o<=a;o++){var s="userSelectRadio"+o;dojo.byId(s).checked=s==e}}},teasp.dialog.UserSelect.prototype.adjustHeight=function(){var e=dojo.byId("userSelectTbody"),t=0;if(dojo.isIE)for(var a=0;a<e.rows.length;a++){for(var o=0,s=0;s<e.rows[a].cells.length;s++){var i=e.rows[a].cells[s].clientHeight;o<i&&(o=i)}t+=o}else for(a=0;a<e.rows.length;a++)t+=e.rows[a].clientHeight;var r=dojo.byId("userSelectDiv");
dojo.toggleClass(r,"disp_table",t<this.maxDivH),dojo.toggleClass(r,"disp_block",t>=this.maxDivH),dojo.style(r,"height",(t<this.maxDivH?t:this.maxDivH)+"px")},teasp.dialog.UserSelect.prototype.search=function(e){var t=e,a=this;return function(){a.searchObj.pageNo=t,a.onSearch(a.searchObj,a.searchRes(),a.searchError())}},teasp.dialog.UserSelect.prototype.clickHead=function(e){var t=e,a=this;return function(){var e;
a.searchObj&&(e=a.sortMap[t],a.searchObj.sortKey==e?a.searchObj.sortOrder="desc"==a.searchObj.sortOrder?null:"desc":a.searchObj.sortOrder=null,a.searchObj.pageNo=1,a.searchObj.sortKey=e,a.onSearch(a.searchObj,a.searchRes(),a.searchError()))}},teasp.dialog.UserSelect.prototype.setPaging=function(e,t){for(;e.firstChild;)dojo.destroy(e.firstChild);for(var a=Math.ceil(t.cntAll/t.rowMax),o=dojo.create("div",{
className:"pageDiv",innerHTML:"&lt;"},e),s=(1<t.pageNo?(dojo.style(o,"color","blue"),dojo.style(o,"cursor","pointer"),this.eventHandles.push(dojo.connect(o,"onclick",this,this.search(t.pageNo-1)))):dojo.style(o,"color","gray"),teasp.util.getPageBox(a,t.pageNo,4,5,4)),i=0;i<s.length;i++){var r,n=s[i];null===n?dojo.create("div",{className:"pageDiv",innerHTML:"･･",style:{color:"gray"}},e):(r=dojo.create("div",{
className:"pageDiv",innerHTML:n},e),t.pageNo==n?dojo.style(r,"color","gray"):(dojo.style(r,"color","blue"),dojo.style(r,"cursor","pointer"),this.eventHandles.push(dojo.connect(r,"onclick",this,this.search(n)))))}var o=dojo.create("div",{className:"pageDiv",innerHTML:"&gt;"},e),a=(t.pageNo<a?(dojo.style(o,"color","blue"),dojo.style(o,"cursor","pointer"),this.eventHandles.push(dojo.connect(o,"onclick",this,this.search(
t.pageNo+1)))):dojo.style(o,"color","gray"),(t.pageNo-1)*t.rowMax+1),o=a+t.rowMax-1,l=(o>t.cntAll&&(o=t.cntAll),"");0<t.cntAll&&(l=t.cntAll<=t.rowMax?teasp.message.getLabel("tk10003230",t.cntAll):teasp.message.getLabel(t.cntAll==teasp.constant.COUNT_LIMIT?"tk10003241":"tk10003240",t.cntAll,a||1,o||1)),dojo.create("div",{className:"pageDiv",style:{width:"10px",height:"2px"}},e),dojo.create("div",{innerHTML:l,style:{
whiteSpace:"nowrap",float:"left"},className:"disp_table"},e),dojo.create("div",{style:{clear:"both"}},e)},teasp.dialog.UserSelect.prototype.displaySort=function(o){var s=this;dojo.query(".head","userSelectBody").forEach(function(e){var t,a;"TD"==e.nodeName&&e.firstChild&&(t=e.firstChild.firstChild)&&(a=t.nextSibling,s.sortMap[e.cellIndex]==o.sortKey?a?a.className="pp_base pp_ico_sort_"+(o.sortOrder?"desc":"asc"):(
dojo.style(t,"float","left"),a=dojo.create("div",{className:"pp_base pp_ico_sort_"+(o.sortOrder?"desc":"asc"),style:{float:"left",marginRight:"auto",marginTop:"4px"}},e.firstChild),dojo.create("div",{style:{clear:"both"}},e.firstChild)):a&&(a.nextSibling&&dojo.destroy(a.nextSibling),dojo.destroy(a),dojo.style(t,"float","none")))})},teasp.dialog.UserSelect.prototype.receiveError=function(e){teasp.util.showErrorArea(e,
"userSelectErrorArea")},teasp.provide("teasp.dialog.AnySelect"),teasp.dialog.AnySelect=function(e,t,a,o,s,i){this.thisObject=e,this.inited=!1,this.opend=!1,this.dialog=null,this.id="tooltipAnySelect",
this.content='<div id="anySelectBody"><div style="width:479px;"><div style="margin:0px 0px 4px 0px;"><table class="pane_table" style="width:100%;background-color:#eaf4fc;"><tr><td style="text-align:left;padding:2px 4px;" ><div id="anySelectTitle"></div></td><td style="text-align:right;padding:2px 4px;"><div id="anySelectClose"></div></td></tr></table></div><div style="float:left;margin-left:4px;margin-right:10px;padding-top:2px;" id="anySelectNameH"></div><div style="float:left;padding-top:1px;margin-right:4px;"><input type="text" id="anySelectName" value="" class="inputran" style="width:160px;padding:1px 2px;" /></div><div style="float:left;"><input type="button" id="anySelectSearch" value="" style="padding:1px 8px;" /></div><div style="clear:both;"></div><div id="anySelectPageArea"><div id="anySelectPage" style="margin-left:10px;"></div></div><table class="stone_table" style="margin-top:4px;"><tr><td class="head" style="width:20px;"></td><td class="head" id="anySelectHeadName" style="width:457px;"><div style="margin:auto;" class="disp_table"><div style="margin:2px;"></div></div></td></tr></table><div class="stone_div" id="anySelectDiv" style="width:477px;border:1px solid #cccccc;" class="disp_table"></div></div><div id="anySelectErrorArea"></div><table border="0" cellpadding="0" cellspacing="0" style="width:479px;margin-top:4px;margin-bottom:2px;"><tr><td style="text-align:right;"><input type="button" id="anySelectOk" value="" style="width:74px;margin-right:24px;padding:2px 4px;" /></td><td style="text-align:left;"><input type="button" id="anySelectCancel" value="" style="width:74px;margin-left:24px;padding:2px 4px;" /></td></tr></table></div>'
,this.eventHandles=[],this.onSearch=t,this.onSelect=a,this.objTitle=o,this.objName=s,this.condition=i,this.searchObj=null,this.targets=null,this.maxDivH=120,this.sortMap={1:"Name"},this._init()},teasp.dialog.AnySelect.prototype.getDialog=function(e){return e&&(this.targets=e),this.dialog},teasp.dialog.AnySelect.prototype._init=function(){var e;this.inited||(this.inited=!0,e={id:this.id,content:this.content,
onKeyPress:dojo.hitch(this,function(e){27===e.keyCode&&dijit.popup.close(this.dialog)})},this.dialog=new dijit.TooltipDialog(e),this.dialog.startup(),dojo.connect(this.dialog,"onOpen",this,function(){console.log("dialog-onOpen"),this.opened||(dojo.style("anySelectTitle","color","#555555"),dojo.style("anySelectTitle","font-weight","bold"),dojo.byId("anySelectTitle").innerHTML=teasp.message.getLabel("tk10004250",
this.objTitle),dojo.byId("anySelectNameH").innerHTML=this.objTitle,dojo.byId("anySelectHeadName").firstChild.firstChild.innerHTML=this.objTitle,(e=dojo.byId("anySelectClose")).style.color="#A0A0A0",e.style.cursor="pointer",e.innerHTML="X",dojo.connect(e,"onclick",this,function(){dijit.popup.close(this.dialog)}),dojo.byId("anySelectOk").disabled=!0,dojo.byId("anySelectSearch").value=teasp.message.getLabel(
"search_btn_title"),dojo.byId("anySelectOk").value=teasp.message.getLabel("select_btn_title"),dojo.byId("anySelectCancel").value=teasp.message.getLabel("cancel_btn_title"),dojo.connect(dojo.byId("anySelectSearch"),"onclick",this,function(){teasp.util.showErrorArea(null,"anySelectErrorArea"),this.searchObj={action:"searchAnySimple",name:dojo.byId("anySelectName").value,pageNo:1,rowMax:20,objName:this.objName,
condition:this.condition},this.onSearch(this.searchObj,this.searchRes(),this.searchError())}),dojo.connect(dojo.byId("anySelectOk"),"onclick",this,function(){for(var e=dojo.byId("anySelectTbody"),t=0;t<e.rows.length;t++){var a=e.rows[t].cells[0].firstChild;a.checked&&(a={targets:this.targets,id:a.nextSibling.value,name:a.nextSibling.nextSibling.value},this.onSelect(a),dijit.popup.close(this.dialog))}}),dojo.connect(
dojo.byId("anySelectCancel"),"onclick",this,function(){dijit.popup.close(this.dialog)}),dojo.connect(dojo.byId("anySelectHeadName"),"onclick",this,this.clickHead(1))),teasp.util.showErrorArea(null,"anySelectErrorArea");var e=dojo.byId("anySelectDiv");e.clientHeight>this.maxDivH&&(dojo.toggleClass(e,"disp_block",!0),dojo.toggleClass(e,"disp_table",!1),dojo.style(e,"height",this.maxDivH+"px")),this.opened=!0}))},
teasp.dialog.AnySelect.prototype.searchRes=function(){var t=this;return function(e){t.refresh.apply(t,[e])}},teasp.dialog.AnySelect.prototype.searchError=function(){var t=this;return function(e){t.receiveError.apply(t,[e])}},teasp.dialog.AnySelect.prototype.refresh=function(e){for(var t=0;t<this.eventHandles.length;t++)dojo.disconnect(this.eventHandles[t]),delete this.eventHandles[t];this.eventHandles=[];for(
var a=e&&e.objs||[],o=(dojo.byId("anySelectOk").disabled=!0,dojo.byId("anySelectName").value=e.name||"",this.setPaging(dojo.byId("anySelectPage"),e),this.displaySort(e),dojo.byId("anySelectDiv"));o.firstChild;)dojo.destroy(o.firstChild);for(var e=dojo.create("table",{className:"stone_table"}),s=dojo.create("tbody",{id:"anySelectTbody"},e),t=0;t<a.length;t++){var i=a[t],r=dojo.create("tr",{className:"sele "+(
t%2==0?"even":"odd")},s),n=dojo.create("td",{style:{width:"22px",textAlign:"center",border:"none"}},r),l=dojo.create("input",{type:"radio",name:"anySelectRadio",id:"anySelectRadio"+(t+1)},n);this.eventHandles.push(dojo.connect(l,"onclick",this,function(e){dojo.byId("anySelectOk").disabled=!1,dojo.isIE<=7&&(e=(e=e||window.event).target||e.srcElement,this.checkSelectRadio(e.id))})),dojo.create("input",{type:"hidden",
value:i.Id},n),dojo.create("input",{type:"hidden",value:i.Name},n),n=dojo.create("td",{width:"440px;",style:{textAlign:"left",border:"none"}},r),dojo.create("div",{innerHTML:i.Name,style:{wordBreak:"break-all"}},n),this.eventHandles.push(dojo.connect(r,"onclick",this,function(e){for(var t=(e=e||window.event).target||e.srcElement;t&&"TR"!=t.nodeName;)t=t.parentNode;t&&"TR"==t.nodeName&&(
t.cells[0].firstChild.checked=!0,dojo.byId("anySelectOk").disabled=!1,dojo.isIE<=7&&this.checkSelectRadio(t.cells[0].firstChild.id))}))}o.appendChild(e),this.adjustHeight()},teasp.dialog.AnySelect.prototype.checkSelectRadio=function(e){if(e){var t=dojo.byId("anySelectTbody");if(t&&"TBODY"==t.nodeName)for(var a=t.rows.length,o=1;o<=a;o++){var s="anySelectRadio"+o;dojo.byId(s).checked=s==e}}},
teasp.dialog.AnySelect.prototype.adjustHeight=function(){var e=dojo.byId("anySelectTbody"),t=0;if(dojo.isIE)for(var a=0;a<e.rows.length;a++){for(var o=0,s=0;s<e.rows[a].cells.length;s++){var i=e.rows[a].cells[s].clientHeight;o<i&&(o=i)}t+=o}else for(a=0;a<e.rows.length;a++)t+=e.rows[a].clientHeight;var r=dojo.byId("anySelectDiv");dojo.toggleClass(r,"disp_table",t<this.maxDivH),dojo.toggleClass(r,"disp_block",
t>=this.maxDivH),dojo.style(r,"height",(t<this.maxDivH?t:this.maxDivH)+"px")},teasp.dialog.AnySelect.prototype.search=function(e){var t=e,a=this;return function(){a.searchObj.pageNo=t,a.onSearch(a.searchObj,a.searchRes(),a.searchError())}},teasp.dialog.AnySelect.prototype.clickHead=function(e){var t=e,a=this;return function(){var e;a.searchObj&&(e=a.sortMap[t],
a.searchObj.sortKey==e?a.searchObj.sortOrder="desc"==a.searchObj.sortOrder?null:"desc":a.searchObj.sortOrder=null,a.searchObj.pageNo=1,a.searchObj.sortKey=e,a.onSearch(a.searchObj,a.searchRes(),a.searchError()))}},teasp.dialog.AnySelect.prototype.setPaging=function(e,t){for(;e.firstChild;)dojo.destroy(e.firstChild);for(var a=Math.ceil(t.cntAll/t.rowMax),o=dojo.create("div",{className:"pageDiv",innerHTML:"&lt;"},e),
s=(1<t.pageNo?(dojo.style(o,"color","blue"),dojo.style(o,"cursor","pointer"),this.eventHandles.push(dojo.connect(o,"onclick",this,this.search(t.pageNo-1)))):dojo.style(o,"color","gray"),teasp.util.getPageBox(a,t.pageNo,4,5,4)),i=0;i<s.length;i++){var r,n=s[i];null===n?dojo.create("div",{className:"pageDiv",innerHTML:"･･",style:{color:"gray"}},e):(r=dojo.create("div",{className:"pageDiv",innerHTML:n},e),
t.pageNo==n?dojo.style(r,"color","gray"):(dojo.style(r,"color","blue"),dojo.style(r,"cursor","pointer"),this.eventHandles.push(dojo.connect(r,"onclick",this,this.search(n)))))}var o=dojo.create("div",{className:"pageDiv",innerHTML:"&gt;"},e),a=(t.pageNo<a?(dojo.style(o,"color","blue"),dojo.style(o,"cursor","pointer"),this.eventHandles.push(dojo.connect(o,"onclick",this,this.search(t.pageNo+1)))):dojo.style(o,"color",
"gray"),(t.pageNo-1)*t.rowMax+1),o=a+t.rowMax-1,l=(o>t.cntAll&&(o=t.cntAll),"");0<t.cntAll&&(l=t.cntAll<=t.rowMax?teasp.message.getLabel("tk10003230",t.cntAll):teasp.message.getLabel(t.cntAll==teasp.constant.COUNT_LIMIT?"tk10003241":"tk10003240",t.cntAll,a||1,o||1)),dojo.create("div",{className:"pageDiv",style:{width:"10px",height:"2px"}},e),dojo.create("div",{innerHTML:l,style:{whiteSpace:"nowrap",float:"left"},
className:"disp_table"},e),dojo.create("div",{style:{clear:"both"}},e)},teasp.dialog.AnySelect.prototype.displaySort=function(o){var s=this;dojo.query(".head","anySelectBody").forEach(function(e){var t,a;"TD"==e.nodeName&&e.firstChild&&(t=e.firstChild.firstChild)&&(a=t.nextSibling,s.sortMap[e.cellIndex]==o.sortKey?a?a.className="pp_base pp_ico_sort_"+(o.sortOrder?"desc":"asc"):(dojo.style(t,"float","left"),
a=dojo.create("div",{className:"pp_base pp_ico_sort_"+(o.sortOrder?"desc":"asc"),style:{float:"left",marginRight:"auto",marginTop:"4px"}},e.firstChild),dojo.create("div",{style:{clear:"both"}},e.firstChild)):a&&(a.nextSibling&&dojo.destroy(a.nextSibling),dojo.destroy(a),dojo.style(t,"float","none")))})},teasp.dialog.AnySelect.prototype.receiveError=function(e){console.log(e),teasp.util.showErrorArea(e,
"anySelectErrorArea")},teasp.provide("teasp.dialog.VerSelect"),teasp.dialog.VerSelect=function(e,t,a,o){this.thisObject=e,this.inited=!1,this.opend=!1,this.dialog=null,this.id="tooltipVerSelect",
this.content='<div id="verSelectBody"><div><div style="margin:0px 0px 4px 0px;"><table class="pane_table" style="width:100%;background-color:#eaf4fc;"><tr><td style="text-align:left;padding:2px 4px;" ><div id="verSelectTitle"></div></td><td style="text-align:right;padding:2px 4px;"><div id="verSelectClose"></div></td></tr></table></div><div id="verSelectInputArea"></div><div id="verSelectPageArea"><div id="verSelectPage" style="margin-left:10px;"></div></div><table class="stone_table" style="margin-top:4px;"><tbody id="verSelectHead"></tbody></table><div class="stone_div" id="verSelectDiv" style="border:1px solid #cccccc;" class="disp_table"></div></div><div id="verSelectErrorArea"></div><table border="0" cellpadding="0" cellspacing="0" style="margin-top:4px;margin-bottom:2px;" id="verSelectButtonArea"><tr><td style="text-align:right;"><input type="button" id="verSelectOk" value="" style="width:74px;margin-right:24px;padding:2px 4px;" /></td><td style="text-align:left;"><input type="button" id="verSelectCancel" value="" style="width:74px;margin-left:24px;padding:2px 4px;" /></td></tr></table></div>'
,this.eventHandles=[],this.hidObj=t,this.onSearch=a,this.onSelect=o,this.searchObj=null,this.result=null,this.targets=null,this.maxDivH=120,this.sortList=[],this.HIDEKEYS=["Id","Name"],teasp.prefixBar="teamspirit__",this.srchData={title:teasp.message.getLabel("tm20001030"),searchFields:[{name:teasp.message.getLabel("tm20001020"),key:"jobCode",type:"text",size:70},{name:teasp.message.getLabel("tm20001030"),
key:"jobName",type:"text",size:120}],columns:[{name:teasp.message.getLabel("tm20001020"),key:"jobCode",apiKey:"JobCode__c",align:"left",size:180},{name:teasp.message.getLabel("tm20001030"),key:"jobName",apiKey:"Name",align:"left",size:340}],searchList:[{soqlFields:["Id","JobCode__c","Name","JobAssignClass__c","StartDate__c","EndDate__c"],soqlFrom:"AtkJob__c",soqlWhere1:"Active__c = true and AssignLimit__c = false",
soqlWhere2:"JobCode__c like '{0}%'",soqlWhere3:"Name like '%{0}%'",soqlWhere4:"(StartDate__c = null or StartDate__c <= {0}) and (EndDate__c = null or EndDate__c >= {0})",procSkip:function(){return!1},procWhere:dojo.hitch(this,function(e){var t=teasp.util.date.formatDate(teasp.util.date.getToday()),a=[],o=(a.push(e.soqlWhere1),dojo.byId("verSelectInput_jobCode"));return o&&o.value&&a.push(
teasp.dialog.VerSelect.getString(e.soqlWhere2,o.value)),(o=dojo.byId("verSelectInput_jobName"))&&o.value&&a.push(teasp.dialog.VerSelect.getString(e.soqlWhere3,o.value)),a.push(teasp.dialog.VerSelect.getString(e.soqlWhere4,t)),a.push(this.jobAssignClass?"(JobAssignClass__c like '%:"+this.jobAssignClass+":%' or JobAssignClass__c = null)":"JobAssignClass__c = null"),a.join(" and ")}),procList:dojo.hitch(this,function(e
){return teasp.util.excludeNameSpace(e),this.HIDEKEYS=["Id","Name","JobAssignClass__c","StartDate__c","EndDate__c"],e})},{soqlFields:["JobId__c","JobId__r.JobCode__c","JobId__r.Name","JobId__r.JobAssignClass__c","JobId__r.StartDate__c","JobId__r.EndDate__c"],soqlFrom:"AtkJobAssign__c",soqlWhere1:"EmpId__c = '{0}' and JobId__r.Active__c = true and JobId__r.AssignLimit__c = true",
soqlWhere2:"JobId__r.JobCode__c like '{0}%'",soqlWhere3:"JobId__r.Name like '%{0}%'",soqlWhere4:"(JobId__r.StartDate__c = null or JobId__r.StartDate__c <= {0}) and (JobId__r.EndDate__c = null or JobId__r.EndDate__c >= {0})",procSkip:function(){var e=dojo.byId("verSelectInput_empId");return!e||!e.value},procWhere:dojo.hitch(this,function(e){var t=teasp.util.date.formatDate(teasp.util.date.getToday()),a=[],o=dojo.byId(
"verSelectInput_empId");return o&&o.value&&a.push(teasp.dialog.VerSelect.getString(e.soqlWhere1,o.value)),(o=dojo.byId("verSelectInput_jobCode"))&&o.value&&a.push(teasp.dialog.VerSelect.getString(e.soqlWhere2,o.value)),(o=dojo.byId("verSelectInput_jobName"))&&o.value&&a.push(teasp.dialog.VerSelect.getString(e.soqlWhere3,o.value)),a.push(teasp.dialog.VerSelect.getString(e.soqlWhere4,t)),a.join(" and ")}),
procList:dojo.hitch(this,function(e){teasp.util.excludeNameSpace(e);for(var t=[],a=0;a<e.length;a++)t.push({Id:e[a].JobId__c,JobCode__c:e[a].JobId__r.JobCode__c,Name:e[a].JobId__r.Name,JobAssignClass__c:e[a].JobId__r.JobAssignClass__c,StartDate__c:e[a].JobId__r.StartDate__c,EndDate__c:e[a].JobId__r.EndDate__c});return this.HIDEKEYS=["Id","Name","JobAssignClass__c","StartDate__c","EndDate__c"],t})}],procList:function(
e){for(var t={},a=[],o=0;o<e.length;o++){var s=e[o];t[s.Id]||(t[s.Id]=1,a.push(s))}return a}},this._init()},teasp.dialog.VerSelect.prototype.setJobAssignClass=function(e){this.jobAssignClass=e},teasp.dialog.VerSelect.prototype.getDialog=function(e){return e&&(this.targets=e),this.dialog},teasp.dialog.VerSelect.prototype._init=function(){var e;this.inited||(this.inited=!0,e={id:this.id,content:this.content,
onKeyPress:dojo.hitch(this,function(e){27===e.keyCode&&dijit.popup.close(this.dialog)})},this.dialog=new dijit.TooltipDialog(e),this.dialog.startup(),dojo.connect(this.dialog,"onOpen",this,function(){if(console.log("dialog-onOpen"),!this.opened){dojo.style("verSelectTitle","color","#555555"),dojo.style("verSelectTitle","font-weight","bold"),dojo.byId("verSelectTitle").innerHTML=teasp.message.getLabel("tk10004250",
this.srchData.title);for(var e=dojo.byId("verSelectInputArea"),t=0;t<this.srchData.searchFields.length;t++){var a=this.srchData.searchFields[t],o=dojo.create("tr",null,dojo.create("tbody",null,dojo.create("table",{className:"pane_table",style:{float:"left"}},e))),s=dojo.create("td",null,o);dojo.create("div",{innerHTML:a.name,style:{padding:"1px 8px"}},s),s=dojo.create("td",null,o),dojo.create("input",{type:"text",
id:"verSelectInput_"+a.key,className:"inputran",style:{width:a.size+"px",padding:"1px 2px"}},s)}if(dojo.create("input",{type:"button",id:"verSelectSearch",style:{padding:"1px 8px",marginLeft:"8px"}},dojo.create("div",{style:{float:"left"}},e)),this.hidObj)for(var i in this.hidObj)this.hidObj.hasOwnProperty(i)&&dojo.create("input",{type:"hidden",id:"verSelectInput_"+i,value:this.hidObj[i]||""},e);dojo.create("div",{
style:{clear:"both"}},e);for(var r=dojo.byId("verSelectHead"),o=dojo.create("tr",null,r),s=dojo.create("td",{style:{width:"22px"},className:"head"},o),n=22,t=0;t<this.srchData.columns.length;t++){var l=(a=this.srchData.columns[t]).size;t==this.srchData.columns.length-1&&(l+=19),n+=l,s=dojo.create("td",{style:{width:l+"px"},className:"head",name:a.key},o),dojo.create("div",{innerHTML:a.name},dojo.create("div",{
className:"disp_table",style:{margin:"auto"}},s)),dojo.connect(s,"onclick",this,this.clickHead(a.key))}r.parentNode.style.width=n+"px",dojo.byId("verSelectButtonArea").style.width=n+"px";dojo.byId("verSelectBody").firstChild.style.width=n+"px";var p=dojo.byId("verSelectClose");p.style.color="#A0A0A0",p.style.cursor="pointer",p.innerHTML="X",dojo.connect(p,"onclick",this,function(){dijit.popup.close(this.dialog)}),
dojo.byId("verSelectOk").disabled=!0,dojo.byId("verSelectSearch").value=teasp.message.getLabel("search_btn_title"),dojo.byId("verSelectOk").value=teasp.message.getLabel("select_btn_title"),dojo.byId("verSelectCancel").value=teasp.message.getLabel("cancel_btn_title"),dojo.connect(dojo.byId("verSelectSearch"),"onclick",this,this.doSearch),dojo.connect(dojo.byId("verSelectOk"),"onclick",this,function(){r=dojo.byId(
"verSelectTbody");for(var e=0;e<r.rows.length;e++){var t=r.rows[e].cells[0].firstChild;if(t.checked){for(var t=t.nextSibling,a=t.nextSibling,o={targets:this.targets,id:t.value,name:a.value,values:[]},s=a.nextSibling;s;)o.values.push(s.value),s=s.nextSibling;this.onSelect(o),dijit.popup.close(this.dialog)}}}),dojo.connect(dojo.byId("verSelectCancel"),"onclick",this,function(){dijit.popup.close(this.dialog)})}
teasp.util.showErrorArea(null,"verSelectErrorArea"),(e=dojo.byId("verSelectDiv")).clientHeight>this.maxDivH&&(dojo.toggleClass(e,"disp_block",!0),dojo.toggleClass(e,"disp_table",!1),dojo.style(e,"height",this.maxDivH+"px")),this.opened=!0}))},teasp.dialog.VerSelect.prototype.doSearch=function(){teasp.util.showErrorArea(null,"verSelectErrorArea");function a(){var e=this.srchData.procList(o);this.result={
cntAll:e.length,rowMax:20,pageNo:1,objs:e},this.sortList=[],this.result.objs=teasp.dialog.VerSelect.doSort(this.result.objs,this.sortList,"JobCode__c"),this.refresh(this.result)}var o=[],s=0,i=function(){};(i=dojo.hitch(this,function(){var t=this;t.srchData.searchList[s].procSkip()?++s<t.srchData.searchList.length?setTimeout(i,100):a.apply(t):this.search(this.srchData.searchList[s],function(e){o=o.concat(
t.srchData.searchList[s].procList(e)),++s<t.srchData.searchList.length?setTimeout(i,100):a.apply(t)},function(e){console.log(teasp.message.getErrorMessage(e))})}))()},teasp.dialog.VerSelect.prototype.search=function(e,t,a){var o=[],s=0,i="select "+e.soqlFields.join(",")+" from "+e.soqlFrom,e=e.procWhere(e),r=(e&&(i=i+" where "+e),i+=" order by Id",function(){});(r=dojo.hitch(this,function(){this.onSearch({
action:"searchVerSimple",soql:i,limit:200,offset:s},function(e){o=o.concat(e.objs),200<=e.objs.length&&o.length<teasp.constant.COUNT_LIMIT?(s+=200,setTimeout(r,100)):t(o)},function(e){console.log(e),a?a(e):console.log(teasp.message.getErrorMessage(e))})}))()},teasp.dialog.VerSelect.prototype.refresh=function(e){for(var t=0;t<this.eventHandles.length;t++)dojo.disconnect(this.eventHandles[t]),
delete this.eventHandles[t];this.eventHandles=[];for(var a=e&&e.objs||[],o=(dojo.byId("verSelectOk").disabled=!0,this.setPaging(dojo.byId("verSelectPage"),e),this.displaySort(),dojo.byId("verSelectDiv"));o.firstChild;)dojo.destroy(o.firstChild);for(var s=39,i=o.scrollTop=0;i<this.srchData.columns.length;i++)s+=(f=this.srchData.columns[i]).size;o.style.width=s+"px";for(var r=dojo.create("table",{
className:"stone_table"}),n=dojo.create("tbody",{id:"verSelectTbody"},r),l=0,t=(e.pageNo-1)*e.rowMax;t<a.length&&!(++l>e.rowMax);t++){var p=a[t],d=dojo.create("tr",{className:"sele "+(t%2==0?"even":"odd")},n),c=dojo.create("td",{style:{width:"22px",textAlign:"center",border:"none"}},d),u=dojo.create("input",{type:"radio",name:"verSelectRadio",id:"verSelectRadio"+(t+1)},c);this.eventHandles.push(dojo.connect(u,
"onclick",this,function(e){dojo.byId("verSelectOk").disabled=!1,dojo.isIE<=7&&(e=(e=e||window.event).target||e.srcElement,this.checkSelectRadio(e.id))}));for(var h=0;h<this.HIDEKEYS.length;h++){var g=this.HIDEKEYS[h]||"";dojo.create("input",{type:"hidden",value:p[g]||""},c)}for(i=0;i<this.srchData.columns.length;i++){var f=this.srchData.columns[i],c=dojo.create("td",{style:{width:f.size+"px",borderLeft:"none",
borderRight:"none",textAlign:f.align}},d),m=teasp.dialog.VerSelect.getValue(p,f);dojo.create("div",{innerHTML:m},c)}this.eventHandles.push(dojo.connect(d,"onclick",this,function(e){for(var t=(e=e||window.event).target||e.srcElement;t&&"TR"!=t.nodeName;)t=t.parentNode;t&&"TR"==t.nodeName&&(t.cells[0].firstChild.checked=!0,dojo.byId("verSelectOk").disabled=!1,dojo.isIE<=7&&this.checkSelectRadio(t.cells[0].firstChild.id
))}))}o.appendChild(r),this.adjustHeight(),(o=dojo.byId("verSelectBody")).firstChild.style.width=s+"px"},teasp.dialog.VerSelect.getValue=function(e,t){var a=t.apiKeys||t.apiKey.split(".");t.apiKeys||(t.apiKeys=a);for(var o=0;o<a.length;o++){var s=a[o];if(!e[s])return null;e=e[s]}return e=e&&"date"==t.type?teasp.util.date.formatDate(teasp.logic.convert.valDate(e),"SLA"):e},teasp.dialog.VerSelect.doSort=function(e,a,t
){for(var o=!1,s=0;s<a.length;s++){var i=a[s];if(i.apiKey==t){o=!0,0==s?i.desc=!i.desc:((i=a.splice(s,1)[0]).desc=!1,a.unshift(i));break}}o||a.unshift({apiKey:t,desc:!1}),a=a.slice(0,2);return e.sort(function(e,t){return teasp.dialog.VerSelect.compareValue(e,t,a)})},teasp.dialog.VerSelect.compareValue=function(e,t,a){a=a[0],e=teasp.dialog.VerSelect.getValue(e,a),t=teasp.dialog.VerSelect.getValue(t,a);
return e==t?0:"number"==typeof e&&"number"==typeof t?(e-t)*(a.desc?-1:1):"string"==typeof e&&"string"==typeof t?(e<t?-1:1)*(a.desc?-1:1):0},teasp.dialog.VerSelect.getString=function(){for(var e=arguments,t=dojo.clone(e[0]),a=1;a<e.length;a++)t=t.replace(RegExp("\\{"+(a-1)+"\\}","g"),e[a]);return t},teasp.dialog.VerSelect.prototype.checkSelectRadio=function(e){if(e){var t=dojo.byId("verSelectTbody");if(
t&&"TBODY"==t.nodeName)for(var a=t.rows.length,o=1;o<=a;o++){var s="verSelectRadio"+o;dojo.byId(s).checked=s==e}}},teasp.dialog.VerSelect.prototype.adjustHeight=function(){var e=dojo.byId("verSelectTbody"),t=0;if(dojo.isIE)for(var a=0;a<e.rows.length;a++){for(var o=0,s=0;s<e.rows[a].cells.length;s++){var i=e.rows[a].cells[s].clientHeight;o<i&&(o=i)}t+=o}else for(a=0;a<e.rows.length;a++)t+=e.rows[a].clientHeight;
var r=dojo.byId("verSelectDiv");dojo.toggleClass(r,"disp_table",t<this.maxDivH),dojo.toggleClass(r,"disp_block",t>=this.maxDivH),dojo.style(r,"height",(t<this.maxDivH?t:this.maxDivH)+"px")},teasp.dialog.VerSelect.prototype.changePage=function(e){var t=e,a=this;return function(){a.result&&(a.result.pageNo=t,a.refresh(a.result))}},teasp.dialog.VerSelect.prototype.clickHead=function(o){var s=this;return function(){if(
s.result){for(var e=null,t=0;t<s.srchData.columns.length;t++){var a=s.srchData.columns[t];if(a.key==o){e=a.apiKey;break}}e&&(s.result.objs=teasp.dialog.VerSelect.doSort(s.result.objs,s.sortList,e),s.result.pageNo=1,s.refresh(s.result))}}},teasp.dialog.VerSelect.prototype.setPaging=function(e,t){for(;e.firstChild;)dojo.destroy(e.firstChild);for(var a=Math.ceil(t.cntAll/t.rowMax),o=dojo.create("div",{
className:"pageDiv",innerHTML:"&lt;"},e),s=(1<t.pageNo?(dojo.style(o,"color","blue"),dojo.style(o,"cursor","pointer"),this.eventHandles.push(dojo.connect(o,"onclick",this,this.changePage(t.pageNo-1)))):dojo.style(o,"color","gray"),teasp.util.getPageBox(a,t.pageNo,4,5,4)),i=0;i<s.length;i++){var r,n=s[i];null===n?dojo.create("div",{className:"pageDiv",innerHTML:"･･",style:{color:"gray"}},e):(r=dojo.create("div",{
className:"pageDiv",innerHTML:n},e),t.pageNo==n?dojo.style(r,"color","gray"):(dojo.style(r,"color","blue"),dojo.style(r,"cursor","pointer"),this.eventHandles.push(dojo.connect(r,"onclick",this,this.changePage(n)))))}var o=dojo.create("div",{className:"pageDiv",innerHTML:"&gt;"},e),a=(t.pageNo<a?(dojo.style(o,"color","blue"),dojo.style(o,"cursor","pointer"),this.eventHandles.push(dojo.connect(o,"onclick",this,
this.changePage(t.pageNo+1)))):dojo.style(o,"color","gray"),(t.pageNo-1)*t.rowMax+1),o=a+t.rowMax-1,l=(o>t.cntAll&&(o=t.cntAll),"");0<t.cntAll&&(l=t.cntAll<=t.rowMax?teasp.message.getLabel("tk10003230",t.cntAll):teasp.message.getLabel(t.cntAll==teasp.constant.COUNT_LIMIT?"tk10003241":"tk10003240",t.cntAll,a||1,o||1)),dojo.create("div",{className:"pageDiv",style:{width:"10px",height:"2px"}},e),dojo.create("div",{
innerHTML:l,style:{whiteSpace:"nowrap",float:"left"},className:"disp_table"},e),dojo.create("div",{style:{clear:"both"}},e)},teasp.dialog.VerSelect.prototype.displaySort=function(){for(var e=0<this.sortList.length?this.sortList[0]:null,t=e?e.apiKey:null,o=e?e.desc:null,s=-1,a=0;a<this.srchData.columns.length;a++){var i=this.srchData.columns[a];if(t&&i.apiKey==t){s=a+1;break}}dojo.query(".head","verSelectHead"
).forEach(function(e){var t,a;"TD"==e.nodeName&&e.firstChild&&(t=e.firstChild.firstChild)&&(a=t.nextSibling,e.cellIndex==s?a?a.className="pp_base pp_ico_sort_"+(o?"desc":"asc"):(dojo.style(t,"float","left"),a=dojo.create("div",{className:"pp_base pp_ico_sort_"+(o?"desc":"asc"),style:{float:"left",marginRight:"auto",marginTop:"4px"}},e.firstChild),dojo.create("div",{style:{clear:"both"}},e.firstChild)):a&&(
a.nextSibling&&dojo.destroy(a.nextSibling),dojo.destroy(a),dojo.style(t,"float","none")))})},teasp.dialog.VerSelect.prototype.receiveError=function(e){console.log(e),teasp.util.showErrorArea(e,"verSelectErrorArea")},teasp.provide("teasp.dialog.ConfirmAlert"),teasp.dialog.ConfirmAlert=function(){this.id="confirmAlertDialog",this.duration=1,
this.content='<table id="confirmAlertTable" class="ts-style"><tr><td class="message_area" style="padding-bottom:8px;"><div id="confirmAlertMessage" style="min-width:340px;max-width:800px;"></div></td></tr><tr class="ts-style-buttons"><td style="text-align:right;"><div><button id="confirmAlertOk">OK</button><button class="clarity" id="confirmAlertCancel">Cancel</button></div></td></tr></table>',this.okLink={
id:"confirmAlertOk",callback:this.ok},this.cancelLink={id:"confirmAlertCancel",callback:this.cancel}},teasp.dialog.ConfirmAlert.prototype=new teasp.dialog.Base,teasp.dialog.ConfirmAlert.prototype.preStart=function(){dojo.connect(this.dialog,"onCancel",this,this.cancel)},teasp.dialog.ConfirmAlert.prototype.preShow=function(){return this.dialog.maxRatio=1,dojo.byId("confirmAlertDialog_title"
).innerHTML=this.args.title||teasp.message.getLabel("em10002080"),dojo.byId("confirmAlertMessage").innerHTML=(this.args.message||"").replace(/\r?\n/g,"<br/>"),dojo.style("confirmAlertCancel","display",this.args.type?"":"none"),dojo.byId("confirmAlertOk").innerHTML=this.args.okLabel||teasp.message.getLabel("ok_btn_title"),dojo.byId("confirmAlertCancel").innerHTML=this.args.cancelLabel||teasp.message.getLabel(
"cancel_btn_title"),teasp.isNarrow()&&(dojo.style("confirmAlertTable","width","100%"),dojo.style("confirmAlertTable","border","1px solid #ccc")),!0},teasp.dialog.ConfirmAlert.prototype.cancel=function(){this.hide(),this.onfinishfunc(!1)},teasp.dialog.ConfirmAlert.prototype.ok=function(){this.hide(),this.onfinishfunc(!0)},teasp.provide("teasp.view.Base"),teasp.view.Base=function(){this.localObj={},teasp.data.Pouch&&(
this.pouch=new teasp.data.Pouch),this.viewParams=null,this.errorAreaId="error_area"},teasp.view.Base.prototype.readParams=function(e){this.viewParams=e||{};for(var t=location.search.split("&"),a=0;a<t.length;a++){var o=t[a],o=(o=0==a?o.substring(1):o).split("=");1<o.length&&(this.viewParams[o[0]]=o[1])}},teasp.view.Base.prototype._init=function(e){return!globalLoadRes||"NG"!=globalLoadRes.result||(e?e(globalLoadRes
):teasp.util.showErrorArea(globalLoadRes.error,this.errorAreaId),!1)},teasp.view.Base.prototype.isArgRead=function(){return"read"==this.viewParams.mode},teasp.view.Base.prototype.viewPlus=function(){var e;this.isArgRead()&&(e=dojo.create("div",{className:"reference-mark"+(teasp.isNarrow()?"-mobile":""),innerHTML:teasp.message.getLabel(teasp.isNarrow()?"tf10007321":"tf10007320"),title:teasp.message.getLabel(
"tf10007330")},dojo.byId("tsfArea")),dojo.connect(e,"onclick",function(){var e=(e=location.href).replace(/mode=read/,"mode=edit");teasp.locationHref(e),document.body.style.cursor="wait"}))},teasp.view.Base.prototype.viewPostProcess=function(){},teasp.provide("teasp.helper.EkitanRoutes"),teasp.helper.EkitanRoutes=function(e){this.routes=new Array;for(var t=0;t<e.length;t++)this.routes.push(
new teasp.helper.EkitanRoute(e[t]))},teasp.helper.EkitanRoutes.prototype.getRouteCount=function(){return this.routes.length},teasp.helper.EkitanRoutes.prototype.getRoutes=function(){return this.routes},teasp.helper.EkitanRoutes.prototype.getRoute=function(e){return e<this.routes.length?this.routes[e]:null},teasp.helper.EkitanRoutes.prototype.destroy=function(){dojo.forEach(this.routes,function(e){e.destroy()})},
teasp.helper.EkitanRoute=function(e){this.route=e,this.fare=e.fare,this.fareIc=e.fareIc,this.commuterCode=e.commuterCode,this.commuterFare=e.commuterFare,this.lines=new Array,this.groups=new teasp.helper.EkitanGroups,this.handles=new Array,e.lines[0].fareGroupId?this.buildNormal(e):this.buildLegacy(e),this.recalc()},teasp.helper.EkitanRoute.formatFare=function(e){return teasp.util.currency.formatMoney(e,"#,##0円")},
teasp.helper.EkitanRoute.prototype.buildNormal=function(e){for(var t=0;t<e.lines.length;t++){var a=new teasp.helper.EkitanLine(e.lines[t]);this.lines.push(a),this.groups.addGroup(t,a)}},teasp.helper.EkitanRoute.prototype.buildLegacy=function(e){for(var t=1,a=null,o=null,s=0;s<e.lines.length;s++){var i=new teasp.helper.EkitanLine(e.lines[s]);this.lines.push(i),null!==i.getFare()&&(a="f"+t++,i.setFareGroupId(a),
this.groups.addGroup(s,i)),o=i.getRailKind()}for(s=this.lines.length-1;0<=s;s--)null!==(i=this.lines[s]).getGroup()?a=i.getFareGroupId():(o!=i.getRailKind()&&(a="f"+t++),i.setFareGroupId(a),this.groups.addGroup(s,i)),o=i.getRailKind()},teasp.helper.EkitanRoute.prototype.createItems=function(){for(var e=new Array,t=0;t<this.lines.length;t++){var a=this.lines[t],o=a.getFare(t),
o=0<t&&!o?"":teasp.helper.EkitanRoute.formatFare(o);e.push({top:a.getFrom(),fare:o,css:"station",line:a}),e.push({top:teasp.message.getLabel("tm20009100",a.getLineName()),css:"way",charges:a.getCharges(),line:a}),(t<this.lines.length-1?this.lines[t+1]:null)||e.push({top:a.getTo(),css:"station",last:!0,line:a})}return e},teasp.helper.EkitanRoute.prototype.createSimpleText=function(){for(var e=new Array,
t=0;t<this.lines.length;t++){var a=this.lines[t];e.push(a.getFrom()),e.push(teasp.message.getLabel("tm20009110")),t>=this.lines.length-1&&e.push(a.getTo())}return e.join("")},teasp.helper.EkitanRoute.prototype.createSimpleText2=function(){for(var e=new Array,t=0;t<this.lines.length;t++){var a=this.lines[t];e.push(a.getFrom()),e.push("-("),e.push(a.getLineName()),e.push(")-"),t>=this.lines.length-1&&e.push(a.getTo())}
return e.join("")},teasp.helper.EkitanRoute.prototype.createText=function(e){for(var t=new Array,a=0;a<this.lines.length;a++){var o,s=this.lines[a],i=(t.push(s.getFrom()),s.getFare(a));e&&null!==i&&t.push("("+i+")"),t.push("--"),t.push(s.getLineName()),e&&s.getCharges().length&&(o=new Array,dojo.forEach(s.getCharges(),function(e){o.push(e.name+(e.use?"*":"")+":"+e.charge)}),t.push("["+o.join(",")+"]")),t.push("--"),
a>=this.lines.length-1&&t.push(s.getTo())}return"total:"+this.getFare()+" "+t.join("")},teasp.helper.EkitanRoute.prototype.createTable=function(e){for(var t=this.createItems(),a=dojo.create("table",{id:e.tableId||null,className:"ekitan_route"}),o=dojo.create("tbody",null,a),s=dojo.create("tr",null,o),i=dojo.create("tr",null,o),r=0;r<t.length;r++){var n,l=t[r],p=(dojo.create("td",{className:l.css,innerHTML:l.top},s),
dojo.create("td",{className:"under"},i));l.charges&&l.charges.length?e.readOnly?(n=l.line.getCurChargeObj(),dojo.create("span",{innerHTML:"（"+(n.name||"")+" "+teasp.helper.EkitanRoute.formatFare(n.charge)+")",style:"font-size:95%;color:red;"},p)):dojo.place(this.createSelect(l,e),p):l.fare?(p.innerHTML=l.fare,p.className+=" fare-"+l.line.getFareGroupId()):p.innerHTML=l.last?teasp.message.getLabel("tm20009120"
):teasp.message.getLabel("tm20009110")}return e.changedFare&&e.changedFare(teasp.helper.EkitanRoute.formatFare(this.getFare())),a},teasp.helper.EkitanRoute.prototype.createSelect=function(e,t){for(var a=dojo.create("select"),o=0;o<e.charges.length;o++){var s=e.charges[o];dojo.create("option",{innerHTML:s.name+" "+teasp.helper.EkitanRoute.formatFare(s.charge),value:s.name,selected:s.use},a)}return this.handles.push(
dojo.connect(a,"onchange",this,this.changeCharge(e.line,t))),a},teasp.helper.EkitanRoute.prototype.changeCharge=function(t,a){return dojo.hitch(this,function(e){t.changeCharge(e.target.value),this.recalc(),dojo.query(".fare-"+t.getFareGroupId(),a.tableId).forEach(function(e){e.innerHTML=teasp.helper.EkitanRoute.formatFare(t.getGroupFare())}),a.changedFare&&a.changedFare(teasp.helper.EkitanRoute.formatFare(
this.getFare()))})},teasp.helper.EkitanRoute.prototype.changeChargeSimple=function(e,t){this.lines[e].changeCharge(t),this.recalc()},teasp.helper.EkitanRoute.prototype.getChargeInfo=function(){for(var e={},t=0;t<this.lines.length;t++){var a=this.lines[t];a.getCharges().length&&(e[t]=a.getCharges())}return e},teasp.helper.EkitanRoute.prototype.destroy=function(){for(var e=0;e<this.handles.length;e++)dojo.disconnect(
this.handles[e]);this.handles=new Array},teasp.helper.EkitanRoute.prototype.recalc=function(){this.groups.recalc(),this.route.fare=this.getFare()},teasp.helper.EkitanRoute.prototype.getFare=function(){return this.groups.getFare()},teasp.helper.EkitanRoute.prototype.getFareEx=function(e){return e?(e=this.getFare(),teasp.helper.EkitanRoute.formatFare(2*e)+"<br/>"+teasp.message.getLabel("tm20001320",
teasp.helper.EkitanRoute.formatFare(e))):teasp.helper.EkitanRoute.formatFare(this.getFare())},teasp.helper.EkitanRoute.prototype.getCommuterCode=function(){return this.commuterCode},teasp.helper.EkitanRoute.prototype.getCommuterFare=function(e){return teasp.util.currency.formatMoney(this.commuterFare,e)},teasp.helper.EkitanRoute.prototype.getRouteObj=function(){return this.route},
teasp.helper.EkitanRoute.prototype.getLines=function(){return this.lines},teasp.helper.EkitanRoute.prototype.getLine=function(e){return e<this.lines.length?this.lines[e]:null},teasp.helper.EkitanLine=function(e){this.line=e,this.groupId=e.groupId,this.lineName=e.lineName,this.railKind=e.railKind,this.stationFrom=e.stationFrom,this.stationTo=e.stationTo,this.fareGroupId=e.fareGroupId||null,this.charges=e.charges||[],
this.fare="number"==typeof e.fare?e.fare:null,this.fareIc="number"==typeof e.fareIc?e.fareIc:null,this.kind=e.kind||null;for(var t=this.curCharge=0;t<this.charges.length;t++){var a=this.charges[t];a.use&&(this.curCharge=a.charge)}},teasp.helper.EkitanLine.prototype.getFrom=function(){return this.stationFrom},teasp.helper.EkitanLine.prototype.getTo=function(){return this.stationTo},
teasp.helper.EkitanLine.prototype.getRailKind=function(){return this.railKind},teasp.helper.EkitanLine.prototype.getLineName=function(){return this.lineName},teasp.helper.EkitanLine.prototype.getCharges=function(){return this.charges},teasp.helper.EkitanLine.prototype.getCharge=function(e){return this.charges[e]},teasp.helper.EkitanLine.prototype.getFareGroupId=function(){return this.fareGroupId},
teasp.helper.EkitanLine.prototype.setFareGroupId=function(e){this.fareGroupId=e},teasp.helper.EkitanLine.prototype.changeCharge=function(e){for(var t=0;t<this.charges.length;t++){var a=this.charges[t];a.name==e?(this.curCharge=a.charge,a.use=!0):a.use=!1}},teasp.helper.EkitanLine.prototype.getCurCharge=function(){return this.curCharge},teasp.helper.EkitanLine.prototype.getCurChargeObj=function(){for(
var e=0;e<this.charges.length;e++){var t=this.charges[e];if(t.use)return t}return{}},teasp.helper.EkitanLine.prototype.getFare=function(e){return void 0===e?this.fare:this.group.getFare(e)},teasp.helper.EkitanLine.prototype.setFare=function(e){this.fare=this.line.fare=e},teasp.helper.EkitanLine.prototype.getGroup=function(){return this.group||null},teasp.helper.EkitanLine.prototype.setGroup=function(e){this.group=e},
teasp.helper.EkitanLine.prototype.getGroupFare=function(){return this.group?this.group.getFare():this.fare},teasp.helper.EkitanGroups=function(){this.fare=0,this.map={},this.summaried=!1},teasp.helper.EkitanGroups.prototype.addGroup=function(e,t){var a=t.getFareGroupId(),o=this.map[a];o?o.add(e,t):o=this.map[a]=new teasp.helper.EkitanGroup(e,t),this.summaried=!1},teasp.helper.EkitanGroups.prototype.summary=function(
){for(var e in this.map)this.map[e].summary();this.summaried=!0},teasp.helper.EkitanGroups.prototype.recalc=function(){for(var e in this.summaried||this.summary(),this.fare=0,this.map){e=this.map[e];this.fare+=e.recalc()}return this.fare},teasp.helper.EkitanGroups.prototype.getFare=function(){return this.fare},teasp.helper.EkitanGroup=function(e,t){this.indexes=new Array,this.map={},this.fare=null,this.fareLine=null,
this.baseFare=0,this.fareGroupId=t.getFareGroupId(),this.add(e,t)},teasp.helper.EkitanGroup.prototype.add=function(e,t){this.indexes.push(e),null!==(this.map[e]=t).getFare()&&(this.fare=t.getFare(),this.fareLine||(this.fareLine=t)),t.setGroup(this)},teasp.helper.EkitanGroup.prototype.getFareGroupId=function(){return this.fareGroupId},teasp.helper.EkitanGroup.prototype.getFare=function(e){if(void 0===e
)return this.fare;for(var t=0;t<this.indexes.length;t++)if(this.indexes[t]==e&&0==t)return this.fare;return null},teasp.helper.EkitanGroup.prototype.summary=function(){this.indexes=this.indexes.sort(function(e,t){return e-t});var e,t=this.baseFare=0;for(e in this.map)t+=this.map[e].getCurCharge();this.baseFare=(this.fare||0)-t},teasp.helper.EkitanGroup.prototype.recalc=function(){var e,t=0;for(e in this.map
)t+=this.map[e].getCurCharge();return this.fare=this.baseFare+t,this.fareLine&&this.fareLine.setFare(this.fare),this.fare};