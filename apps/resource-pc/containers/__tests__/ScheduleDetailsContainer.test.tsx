import React from 'react';
import { Provider } from 'react-redux';
import renderer from 'react-test-renderer';
import configureStore from 'redux-mock-store';
import thunk from 'redux-thunk';

import ScheduleDetailsContainer from '../ScheduleDetailsContainer';

const mockStore = configureStore([thunk]);

const state = {
  userSetting: {
    companyId: '',
  },
  ui: {
    filter: {
      roleRequest: {
        assignmentDueDate: ['', ''],
        clientName: '',
        deptId: '',
        jobGradeIds: [],
        pmName: '',
        pmCode: '',
        projectCode: '',
        projectJobId: '',
        projectTitle: '',
        receivedDate: ['', ''],
        requestCode: '',
        requesterName: '',
        requesterCode: '',
        resourceGroup: '',
        rmName: 'Sista Aadmi',
        roleStartDate: ['', ''],
        roleTitle: '',
        statusList: ['Requested', 'Scheduling'],
      },
      resourceSelection: {
        startDate: '2022-01-25',
        endDate: '2022-07-24',
        code: '',
        departmentName: '',
        isDateFilterNotApplied: true,
        jobGradeIds: [],
        name: '',
        position: '',
        requiredTime: 1080,
        resourceGroups: [],
        resourceManager: null,
        rmId: '',
        skills: [],
      },
      viewAllResources: {
        startDate: '2022-02-01',
        endDate: '2023-02-28',
        code: '',
        departmentName: '',
        isDateFilterNotApplied: true,
        jobGradeIds: null,
        name: '',
        position: '',
        requiredTime: 0,
        resourceGroups: null,
        resourceManager: null,
        rmId: '',
        skills: [],
      },
      requestSelection: {
        assignmentDueDate: ['', ''],
        clientName: '',
        deptId: '',
        jobGradeIds: [],
        pmName: '',
        pmCode: '',
        projectCode: '',
        projectJobId: '',
        projectTitle: '',
        receivedDate: ['', ''],
        requesterName: '',
        requestCode: '',
        requesterCode: '',
        resourceGroup: '',
        rmName: 'Sista Aadmi',
        roleStartDate: ['', ''],
        roleTitle: '',
        statusList: ['Requested', 'Scheduling'],
      },
    },
    dialog: {
      activeDialog: [],
    },
    overlap: false,
    siteRoute: 'RESOURCE_PLANNER',
    mode: 'REQUEST_SELECT',
    tab: 'Resource',
    resourceAvailability: {
      availableHours: [
        [480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0],
        [480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0],
        [480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0],
        [480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0],
        [480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0],
      ],
      endDate: '',
      limit: 12,
      page: 0,
      startDate: '2022-01-25',
      viewType: 'day',
    },
    resourceSelection: {
      currentState: 'SEARCH_RESOURCE',
      currentIndex: -1,
      currentStrategy: 'AdjustConsiderAvailability',
      currentWorkHoursPerDay: 8,
      currentWorkHoursPercentPerDay: 100,
    },
    resourceAssignmentDetail: {
      bookedTimePerDay: [],
    },
    isLoading: false,
  },
  entities: {
    psa: {
      psaGroup: {
        selectedGroup: {
          code: 'PSAG001',
          companyId: 'a0Y6D000001oEHEUA2',
          groupType: 'PsaGroup',
          id: 'a1l6D000001lgKtQAI',
          isOwned: null,
          name: 'PSA Group 1',
          name_L0: 'PSA Group 1',
          name_L1: 'PSA Group 1',
        },
      },
      role: {
        role: {
          extendedItemValueId: null,
          extendedItems: [],
          companyId: null,
          workingDays: 23,
          useDefaultRate: false,
          status: 'Requested',
          startDate: '2022-01-25',
          roleTitle: 'Copy of Copy of role 1',
          roleId: 'a1cN000000355G8IAI',
          requiredTimePercentage: 10,
          requiredTime: 1080,
          remarks: null,
          maxWorkingTime: 11040,
          isDirectAssign: false,
          isActivityLead: false,
          groupId: 'a1lN000000CFCbxIAH',
          endDate: '2022-02-24',
          costRate: null,
          billRate: null,
          assignmentDueDate: '2022-01-25',
          activityId: 'a1dN0000006Uus5IAC',
          softBookDate: null,
          softBookBy: null,
          skills: [],
          requesterDeptName: 'DEPARTMENT QA',
          requesterDeptCode: 'DEP001',
          requestDateTime: '2022-01-25T06:38:22.000Z',
          requestCode: '0000000002',
          requestByCode: 'TDEMP000',
          requestBy: 'Sista Aadmi',
          projectJobCode: 'TDC',
          projectDept: null,
          projectCode: 'TDC',
          memo: {
            visibleForRM: true,
            visibleForManagers: true,
            memoForRM: null,
            memoForManagers: null,
            memoForAll: null,
            id: 'a1nN00000043qmyIAA',
          },
          jobGrades: [
            {
              name: 'TD Job Grade Level 1',
              id: 'a1mN0000003wWqBIAU',
              costRate: 1000,
            },
          ],
          jobCode: 'JOB_1643092679116',
          groupName: 'TD Resource Group 01',
          confirmDate: null,
          confirmBy: null,
          commentsHistory: [
            {
              status: 'Requested',
              employeeName: 'Sista Aadmi',
              employeeId: 'a0kN000000EeVq5IAF',
              createdDate: '2022-01-25T06:38:22Z',
              comments: null,
              action: 'Submit Request',
            },
          ],
          clientName: null,
          assignment: {
            bookedTimePerDay: '',
            startDate: '',
            strategy: {
              schedulingStrategy: '',
            },
          },
        },
      },
      request: {
        pageSize: 10,
        pageNum: 1,
      },
      resource: {
        resourceList: [
          {
            position: null,
            photoUrl:
              'https://nosoftware-drive-2817-dev-ed--c.documentforce.com/profilephoto/005/T',
            name: 'Sista Aadmi',
            matchedSkills: 0,
            jobGradeName: '',
            jobGradeCode: '',
            id: 'a0kN000000EeVq5IAF',
            historyId: 'a0lN0000003stjOIAQ',
            departmentName: 'DEPARTMENT QA',
            departmentCode: 'DEP001',
            code: 'TDEMP000',
            availableTime: 57594,
            availability: [
              480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 114, 420,
              420, 480, 0, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 0,
              480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480,
              480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 0, 480, 480, 480, 480,
              0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0,
              0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0,
              480, 480, 480, 480, 0, 0, 0, 480, 0, 0, 0, 480, 0, 0, 480, 480,
              480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480,
              480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480,
              480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480,
              0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0,
              0, 480, 480, 480, 480, 480, 0, 0, 0, 480, 480, 480, 480, 0, 0,
            ],
            hasAssignment: true,
          },
          {
            position: null,
            photoUrl:
              'https://nosoftware-drive-2817-dev-ed--c.documentforce.com/profilephoto/005/T',
            name: 'Stan Usou',
            matchedSkills: 0,
            jobGradeName: '',
            jobGradeCode: '',
            id: 'a0kN000000EeVqAIAV',
            historyId: 'a0lN0000003stj4IAA',
            departmentName: 'DEPARTMENT QA',
            departmentCode: 'DEP001',
            code: 'TDEMP001',
            availableTime: 58020,
            availability: [
              480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 420, 480,
              480, 480, 0, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 0,
              480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480,
              480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 0, 480, 480, 480, 480,
              0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0,
              0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0,
              480, 480, 480, 480, 0, 0, 0, 480, 0, 0, 0, 480, 0, 0, 480, 480,
              480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480,
              480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480,
              480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480,
              0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0,
              0, 480, 480, 480, 480, 480, 0, 0, 0, 480, 480, 480, 480, 0, 0,
            ],
            hasAssignment: true,
          },
          {
            position: null,
            photoUrl:
              'https://nosoftware-drive-2817-dev-ed--c.documentforce.com/profilephoto/005/T',
            name: 'Resou Maan',
            matchedSkills: 0,
            jobGradeName: '',
            jobGradeCode: '',
            id: 'a0kN000000EeVqFIAV',
            historyId: 'a0lN0000003stj9IAA',
            departmentName: 'DEPARTMENT QA',
            departmentCode: 'DEP001',
            code: 'TDEMP002',
            availableTime: 56736,
            availability: [
              480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 468, 468,
              468, 468, -12, 0, 0, 468, 468, 468, 468, 468, 0, 0, 468, 468, -12,
              468, 468, 0, 0, 468, 468, 468, 468, 468, 0, 0, 468, 468, 468, 468,
              468, 0, 0, 468, 468, 468, 468, 468, 0, 0, -12, 468, 468, 468, 468,
              0, 0, 468, 468, 468, 468, 468, 0, 0, 468, 468, 468, 468, 468, 0,
              0, 468, 468, 468, 468, 468, 0, 0, 468, 468, 468, 468, 468, 0, 0,
              468, 468, 468, 468, -12, 0, 0, 468, -12, -12, -12, 468, 0, 0, 468,
              468, 468, 468, 468, 0, 0, 468, 468, 468, 468, 468, 0, 0, 468, 468,
              468, 468, 468, 0, 0, 468, 468, 468, 468, 468, 0, 0, 468, 468, 468,
              468, 468, 0, 0, 468, 468, 468, 468, 468, 0, 0, 468, 468, 468, 468,
              468, 0, 0, 468, 468, 468, 468, 468, 0, 0, 468, 468, 468, 468, 468,
              0, 0, 468, 468, 468, 468, 468, 0, 0, -12, 468, 468, 468, 468, 0,
              0,
            ],
            hasAssignment: true,
          },
          {
            position: null,
            photoUrl:
              'https://nosoftware-drive-2817-dev-ed--c.documentforce.com/profilephoto/005/T',
            name: 'Produ Managi',
            matchedSkills: 0,
            jobGradeName: '',
            jobGradeCode: '',
            id: 'a0kN000000EeVqKIAV',
            historyId: 'a0lN0000003stjEIAQ',
            departmentName: 'DEPARTMENT QA',
            departmentCode: 'DEP001',
            code: 'TDEMP003',
            availableTime: 58080,
            availability: [
              480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480,
              480, 480, 0, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 0,
              480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480,
              480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 0, 480, 480, 480, 480,
              0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0,
              0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0,
              480, 480, 480, 480, 0, 0, 0, 480, 0, 0, 0, 480, 0, 0, 480, 480,
              480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480,
              480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480,
              480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480,
              0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0,
              0, 480, 480, 480, 480, 480, 0, 0, 0, 480, 480, 480, 480, 0, 0,
            ],
            hasAssignment: true,
          },
          {
            position: null,
            photoUrl:
              'https://nosoftware-drive-2817-dev-ed--c.documentforce.com/profilephoto/005/T',
            name: 'Akou Cleri',
            matchedSkills: 0,
            jobGradeName: '',
            jobGradeCode: '',
            id: 'a0kN000000EeVqPIAV',
            historyId: 'a0lN0000003stjJIAQ',
            departmentName: 'DEPARTMENT QA',
            departmentCode: 'DEP001',
            code: 'TDEMP004',
            availableTime: 57528,
            availability: [
              480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 360, 480,
              480, 480, 0, 0, 0, 480, 426, 426, 426, 426, 0, 0, 426, 426, -54,
              426, 426, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480,
              480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 0, 480, 480, 480, 480,
              0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0,
              0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0,
              480, 480, 480, 480, 0, 0, 0, 480, 0, 0, 0, 480, 0, 0, 480, 480,
              480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480,
              480, 480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480,
              480, 0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480,
              0, 0, 480, 480, 480, 480, 480, 0, 0, 480, 480, 480, 480, 480, 0,
              0, 480, 480, 480, 480, 480, 0, 0, 0, 480, 480, 480, 480, 0, 0,
            ],
            hasAssignment: true,
          },
        ],
      },
      project: {
        totalRecords: 0,
        totalPages: 0,
        pageSize: 0,
        pageNum: 0,
        pageData: [],
        project: {
          extendedItemValueId: null,
          extendedItems: [],
          companyId: 'a0YN000000CSVR2MAP',
          workTimePerDay: 480,
          workingDayWED: true,
          workingDayTUE: true,
          workingDayTHU: true,
          workingDaySUN: false,
          workingDaySAT: false,
          workingDayMON: true,
          workingDayFRI: true,
          status: 'InProgress',
          startDate: '2022-01-25',
          revisionComment: null,
          projectId: 'a1uN0000002Wj84IAC',
          pmName: 'Sista Aadmi',
          pmCode: 'TDEMP000',
          pmBaseId: 'a0kN000000EeVq5IAF',
          name: 'TD QA Project',
          jobId: 'a0xN0000003qVKJIA2',
          jobCode: 'TDC',
          groupName: 'TD Resource Group 01',
          groupId: 'a1lN000000CFCbxIAH',
          endDate: '2023-01-25',
          description: null,
          deptName: null,
          deptId: null,
          deptCode: null,
          currentDetailId: 'a1qN0000003cg3mIAA',
          code: 'TDC',
          closeDate: null,
          clientName: null,
          clientId: null,
          clientCode: null,
          calendarId: 'a0WN000000G6ncxMAB',
        },
      },
    },
  },
};

describe('ScheduleDetailsContainer Test', () => {
  let store;
  let component;
  beforeEach(async () => {
    store = mockStore(state);
    await renderer.act(() => {
      component = renderer.create(
        <Provider store={store}>
          <ScheduleDetailsContainer />
        </Provider>
      );
    });
  });

  it('it renders without crashing', () => {
    expect(component.toJSON()).toMatchSnapshot();
  });
});
